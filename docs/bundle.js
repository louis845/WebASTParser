!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.WebASTParser=e():t.WebASTParser=e()}(self,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{parsePython:()=>ct,parseTypeScript:()=>ht,tokenizePython:()=>rt,tokenizeTypeScript:()=>at,treeTokenizer:()=>o});var n,s,i,o={};function r(t){return t.split(/\r?\n/)}function a(t){return{start:{line:t.start_line,character:t.start_character},end:{line:t.end_line,character:t.end_character}}}function c(t){return{line:t.start_line,character:t.start_character}}function h(t){return{line:t.end_line,character:t.end_character}}function l(t,e){return{start_line:t.line,start_character:t.character,end_line:e.line,end_character:e.character}}function u(t){return 0===t.length?{start_line:0,start_character:0,end_line:0,end_character:0}:{start_line:0,start_character:0,end_line:t.length,end_character:0}}function T(t,e){return t.line<e.line?-1:e.line<t.line?1:t.character<e.character?-1:e.character<t.character?1:0}function d(t){if(0===t.length)throw new Error("No ranges to merge.");let{start:e,end:n}=a(t[0]);for(let s=1;s<t.length;s++){let{start:i,end:o}=a(t[s]);-1==T(i,e)&&(e=i),-1==T(n,o)&&(n=o)}return{start_line:e.line,start_character:e.character,end_line:n.line,end_character:n.character}}function S(t,e){return T(a(t).start,a(e).start)<=0&&T(a(e).end,a(t).end)<=0}function g(t,e){return T(a(t).start,e)<=0&&T(e,a(t).end)<0}function f(t){return Object.values(i).includes(t)}t.r(o),t.d(o,{TokenizationMode:()=>U,flattenFaithfully:()=>J,flattenPython:()=>X,flattenTypeScript:()=>Z}),function(t){t.MULTILINE_COMMENTS_OR_STRINGS="MULTILINE_COMMENTS_OR_STRINGS",t.SINGLELINE_COMMENTS="SINGLELINE_COMMENTS",t.STRINGS="STRINGS",t.SPACINGS="SPACINGS",t.BRACES="BRACES",t.COMMAS="COMMAS",t.OTHERS="OTHERS",t.CONTINUATION="CONTINUATION"}(n||(n={})),function(t){t.TOP_LEVEL="TOP_LEVEL",t.CLASSES="CLASSES",t.FUNCTIONS="FUNCTIONS",t.FUNCTION_DECLARATION="FUNCTION_DECLARATION",t.FUNCTION_BODY="FUNCTION_BODY"}(s||(s={})),function(t){t.COMMENT_SINGLELINE="COMMENT_SINGLELINE",t.COMMENT_MULTILINE="COMMENT_MULTILINE",t.REFERENCES="REFERENCES",t.ARGUMENT="ARGUMENT",t.ATTRIBUTES="ATTRIBUTES",t.FILLER="FILLER",t.STATEMENTS_FILLER="STATEMENTS_FILLER"}(i||(i={}));const E={[n.MULTILINE_COMMENTS_OR_STRINGS]:["#ffeb3b","#efdb2b"],[n.SINGLELINE_COMMENTS]:["#c8e6c9","#b8d6b9"],[n.STRINGS]:["#bbdefb","#abceeb"],[n.SPACINGS]:["#f0f0f0","#e0e0e0"],[n.BRACES]:["#ffcdd2","#efbdc2"],[n.COMMAS]:["#e0ffff","#d0efef"],[n.OTHERS]:["#d1c4e9","#c1b4d9"],[n.CONTINUATION]:["#ff0000","#ff0000"]};class p extends HTMLElement{constructor(t=[]){super(),this.tokens=[],this.attachShadow({mode:"open"}),this.container=document.createElement("div"),this.container.style.fontFamily="monospace",this.container.style.whiteSpace="pre-wrap",this.container.style.padding="10px",this.container.style.border="1px solid #ccc",this.container.style.borderRadius="4px",this.shadowRoot.appendChild(this.container),t.length>0&&(this.tokens=t,this.render())}update(t){this.tokens=t,this.render()}render(){this.container.innerHTML="";let t=0;this.tokens.forEach((e=>{const n=e.tokenType,s=E[n]||"#ffffff",i=e.stringContents.split("\n");i.forEach(((e,n)=>{const o=document.createElement("span");o.textContent=e,o.style.backgroundColor=s[t%2],o.style.border="1px solid #00000033",o.style.borderRadius="3px",o.style.padding="2px 4px",o.style.margin="1px",o.style.display="inline-block",n<i.length-1?(o.textContent=o.textContent+"\\n",this.container.appendChild(o),this.container.appendChild(document.createElement("br"))):o.textContent.length>0&&this.container.appendChild(o)})),t++}))}}class m{constructor(t,e={}){this.range=t,this.parent=null,this.children=[],this.extra_data=e,this.innerRangeOverride=null,this.siblingRank=0}getRange(){return this.range}overrideInnerRange(t){if(!S(this.range,t))throw Error("Inner range must be (not necessarily strictly) contained inside the full range!");this.innerRangeOverride=t}getInnerRange(){return null!==this.innerRangeOverride?this.innerRangeOverride:this.hasChildren()?d(this.children.map((t=>t.getRange()))):null}getPrefixRange(){const t=this.getInnerRange();return null===t?null:l(a(this.range).start,a(t).start)}getSuffixRange(){const t=this.getInnerRange();return null===t?null:l(a(t).end,a(this.range).end)}hasChildren(){return this.children.length>0}setParent(t){this.parent=t}getParent(){return this.parent}addChild(t){t.setParent(this),t.siblingRank=this.children.length,this.children.push(t)}getSiblingRank(){return this.siblingRank}listChildren(){return this.children.slice()}assertRangeValid(){for(const t of this.children)if(!S(this.range,t.range))throw Error("Invalid range! Expected child range to be inside this.range.")}getDepth(){return null===this.parent?0:this.parent.getDepth()+1}}class y extends m{constructor(t,e,n=null,s={}){super(t,s),this.argumentName=e,this.argumentType=n}}class C extends m{constructor(t,e,n=null,s={}){super(t,s),this.attributeName=e,this.attributeType=n}}class I extends m{constructor(t,e,n,s={}){super(t,s),this.classType=e,this.classDefinitionText=n}}class N extends m{constructor(t,e,n,s={}){super(t,s),this.isMultiLine=e,this.commentContents=n}}class b extends m{constructor(t,e,n,s={}){super(t,s),this.functionName=e,this.functionReturnType=n}hasArguments(){return this.children.some((t=>t instanceof y))}}class L extends m{constructor(t,e={}){super(t,e)}hasComment(){return this.children.some((t=>t instanceof N))}}class k extends m{constructor(t,e,n={}){super(t,n),this.functionDefinitionText=e,this.funcBodyNonEmpty=!1}hasFunctionBody(){return this.funcBodyNonEmpty}flagHaveFunctionBody(){this.funcBodyNonEmpty=!0}}class R extends m{constructor(t,e,n,s={}){super(t,s),this.referenceText=e,this.refRelativePath=n}}class O extends m{constructor(t,e={}){super(t,e)}}class x extends Error{constructor(t){super(t),this.name="CodeParsingError"}}var M,B;!function(t){t[t.TOP_LEVEL=0]="TOP_LEVEL",t[t.REFERENCES=1]="REFERENCES",t[t.FUNCTION_GROUP=2]="FUNCTION_GROUP",t[t.FUNCTION=3]="FUNCTION",t[t.FUNCTION_DEFINITION=4]="FUNCTION_DEFINITION",t[t.COMMENTS=5]="COMMENTS",t[t.CLASS=6]="CLASS",t[t.ATTRIBUTE=7]="ATTRIBUTE",t[t.ARGUMENT=8]="ARGUMENT",t[t.OTHERS=9]="OTHERS"}(M||(M={})),function(t){t[t.TERMINATE=0]="TERMINATE",t[t.RESOLVE=1]="RESOLVE"}(B||(B={}));class A{static tokensToString(t){let e="";for(const n of t)e+=n.stringContents;return e}constructor(){this.tree=null,this.tokenString=[],this.start={line:0,character:0},this.end={line:0,character:0},this.subtreeRestrictionPath=null,this.nodeToReplace=null,this.replacementString=null,this.nodeToReplaceTokenIdx=-1,this.fillTokens=!0}tokenize(t,e=!0){return this.tree=t,this.tokenString=[],({start:this.start,end:this.end}=t.getMaxRangeAsIndices()),this.subtreeRestrictionPath=null,this.nodeToReplace=null,this.replacementString=null,this.nodeToReplaceTokenIdx=-1,this.fillTokens=e,this.pretokenize(this.tokenString),this.recursivelyTokenize(t.getRoot(),0,null),this.posttokenize(this.tokenString),this.tokenString}tokenizeSubtree(t,e,n,s=!0){if(e===t.getRoot())return this.tokenize(t);if(this.disableSubtreeParsing())throw Error("Subtree parsing is not allowed for this AST tokenizer!");if(this.tree=t,this.tokenString=[],({start:this.start,end:this.end}=t.getMaxRangeAsIndices()),this.nodeToReplace=null,this.replacementString=null,this.nodeToReplaceTokenIdx=-1,this.fillTokens=s,n){this.subtreeRestrictionPath=[];const n=[];for(let t=0;t<e.getDepth();t++)0===t?n.push(e):n.push(n[n.length-1].getParent());for(let t=0;t<n.length;t++)this.subtreeRestrictionPath.push(n[n.length-1-t]);this.pretokenize(this.tokenString),this.recursivelyTokenize(t.getRoot(),0,null,this.subtreeRestrictionPath[0]),this.posttokenize(this.tokenString)}else this.subtreeRestrictionPath=null,this.pretokenize(this.tokenString),this.includeIndentation(this.tokenString,e.getDepth()),this.recursivelyTokenize(e,e.getDepth(),null),this.posttokenize(this.tokenString);return this.tokenString}tokenizeReplaceNode(t,e,n){return this.tree=t,this.tokenString=[],({start:this.start,end:this.end}=t.getMaxRangeAsIndices()),this.subtreeRestrictionPath=null,this.nodeToReplace=e,this.replacementString=n,this.nodeToReplaceTokenIdx=-1,this.fillTokens=!0,this.pretokenize(this.tokenString),this.recursivelyTokenize(t.getRoot(),0,null),this.posttokenize(this.tokenString),this.tokenString}tokenizeTargetNode(t,e){return this.tree=t,this.tokenString=[],({start:this.start,end:this.end}=t.getMaxRangeAsIndices()),this.subtreeRestrictionPath=null,this.nodeToReplace=e,this.replacementString=null,this.nodeToReplaceTokenIdx=-1,this.fillTokens=!0,this.pretokenize(this.tokenString),this.recursivelyTokenize(t.getRoot(),0,null),this.posttokenize(this.tokenString),{tokList:this.tokenString,foundTokenIdx:this.nodeToReplaceTokenIdx}}needsFillTokens(){return this.fillTokens}getTexts(t){const e=t.getRange(),n=t.getPrefixRange(),s=t.getSuffixRange();if((t instanceof k||t instanceof I)&&(null===n||null===s))throw new x("The Parser must implement and resolve the inner range for Functions and Classes! This is the maximal inner range so that when taken away, the class/function is still a valid class/function (with no body).");const i=this.tree.getSourceTextFromRange(e);let o=null,r=null;return null!==n&&-1===T(c(n),h(n))&&(o={text:this.tree.getSourceTextFromRange(n),range:n}),null!==s&&-1===T(c(s),h(s))&&(r={text:this.tree.getSourceTextFromRange(s),range:s}),{tokenText:{text:i,range:e},tokenPrefixText:o,tokenSuffixText:r}}recursivelyTokenize(t,e,n,s=null){if(null!==this.nodeToReplace&&t===this.nodeToReplace){const t=null===this.replacementString?"[PLACEHOLDER/ERROR: Didn't provide replacement string!]":this.replacementString;return this.tokenString.push({stringContents:t,tokenType:M.OTHERS}),void(this.nodeToReplaceTokenIdx=this.tokenString.length-1)}const{tokenText:i,tokenPrefixText:o,tokenSuffixText:r}=this.getTexts(t),{prefixTokens:a,suffixTokens:c,action:h}=this.convertIntoTokens(t,e,n,i,o,r);if(void 0!==a)for(const t of a)this.tokenString.push(t);if(h===B.RESOLVE){let n=null;for(const i of t.listChildren())if(null===s||i===s){let t=null;null!==this.subtreeRestrictionPath&&e+1<this.subtreeRestrictionPath.length&&(t=this.subtreeRestrictionPath[e+1]),this.recursivelyTokenize(i,e+1,n,t),n=i}}if(void 0!==c){if(c.length>0){const t=this.handleFirstSuffixTokenIfNecessary(c[0]);null!==t&&this.tokenString.push(t)}let t=null;for(const e of c)this.tokenString.push(e),void 0!==e.range&&(t=e);null!==t&&this.handleLastSuffixTokenWithRangeIfNecessary(t)}}disableSubtreeParsing(){return!1}getCodeString(t){return this.tree.getSourceTextFromRange(t)}getCodeStringFromIndices(t,e){return this.getCodeString(l(t,e))}getGlobalStartIndex(){return this.start}getGlobalEndIndex(){return this.end}handleFirstSuffixTokenIfNecessary(t){return null}handleLastSuffixTokenWithRangeIfNecessary(t){}}const F={[M.ARGUMENT]:["#FFF8DC","#EFE8CC"],[M.ATTRIBUTE]:["#E0FFFF","#D0EFEF"],[M.CLASS]:["#FFE4E1","#EFD4D1"],[M.COMMENTS]:["#F0FFF0","#E0EFE0"],[M.FUNCTION]:["#F5F5DC","#E5E5CC"],[M.FUNCTION_DEFINITION]:["#F0F8FF","#E0E8EF"],[M.FUNCTION_GROUP]:["#FAFAD2","#EAEAC2"],[M.OTHERS]:["#FFFFFF","#EFEFEF"],[M.REFERENCES]:["#FFF0F5","#EFE0E5"],[M.TOP_LEVEL]:["#F5FFFA","#E5EFEA"]};class _ extends HTMLElement{constructor(t=[]){super(),this.tokens=[],this.hoverDiv=null,this.attachShadow({mode:"open"}),this.container=document.createElement("div"),this.container.style.fontFamily="monospace",this.container.style.whiteSpace="pre-wrap",this.container.style.padding="10px",this.container.style.border="1px solid #ccc",this.container.style.borderRadius="4px",this.shadowRoot.appendChild(this.container),t.length>0&&(this.tokens=t,this.render())}update(t){this.tokens=t,this.render()}getHoverText(t){if(void 0!==t.originalNode){const e=t.originalNode;if(e instanceof y)return`Type: Argument   Depth: ${e.getDepth()}   Rank: ${e.getSiblingRank()}\nName: ${e.argumentName}   Type: ${e.argumentType}`;if(e instanceof C)return`Type: Attributes   Depth: ${e.getDepth()}   Rank: ${e.getSiblingRank()}\nName: ${e.attributeName}   Type: ${e.attributeType}`;if(e instanceof I)return`Type: Classes   Depth: ${e.getDepth()}   Rank: ${e.getSiblingRank()}\nDefinition: ${e.classDefinitionText}\nClass type: ${e.classType}`;if(e instanceof N)return`Type: Comments   Depth: ${e.getDepth()}   Rank: ${e.getSiblingRank()}\nContents: ${e.commentContents}\nIs multiline: ${e.isMultiLine}`;if(e instanceof b)return`Type: Funct Decl   Depth: ${e.getDepth()}   Rank: ${e.getSiblingRank()}\nName: ${e.functionName}\nReturn type: ${e.functionReturnType}`;if(e instanceof k)return`Type: Function   Depth: ${e.getDepth()}   Rank: ${e.getSiblingRank()}\nDefinition: ${e.functionDefinitionText}\nHas body: ${e.hasFunctionBody()}`;if(e instanceof R)return`Type: References   Depth: ${e.getDepth()}   Rank: ${e.getSiblingRank()}\nReference Text: ${e.referenceText}\nReference Path: ${e.refRelativePath}`;if(e instanceof O)return`Type: Top Level   Depth: ${e.getDepth()}   Rank: ${e.getSiblingRank()}`}return null}render(){this.container.innerHTML="";const t={[M.ARGUMENT]:0,[M.ATTRIBUTE]:0,[M.CLASS]:0,[M.COMMENTS]:0,[M.FUNCTION]:0,[M.FUNCTION_DEFINITION]:0,[M.FUNCTION_GROUP]:0,[M.OTHERS]:0,[M.REFERENCES]:0,[M.TOP_LEVEL]:0},e={[M.ARGUMENT]:void 0,[M.ATTRIBUTE]:void 0,[M.CLASS]:void 0,[M.COMMENTS]:void 0,[M.FUNCTION]:void 0,[M.FUNCTION_DEFINITION]:void 0,[M.FUNCTION_GROUP]:void 0,[M.OTHERS]:void 0,[M.REFERENCES]:void 0,[M.TOP_LEVEL]:void 0};this.tokens.forEach((n=>{const s=n.tokenType,i=F[s]||"#ffffff";void 0!==n.originalNode&&n.originalNode===e[s]||t[s]++,e[s]=n.originalNode;const o=n.stringContents.split("\n");o.forEach(((e,r)=>{const a=document.createElement("span");a.textContent=e,a.style.backgroundColor=i[t[s]%2],a.style.border="1px solid #00000033",a.style.borderRadius="3px",a.style.padding="2px 4px",a.style.margin="1px",a.style.display="inline-block",a.style.position="relative",a.addEventListener("mouseenter",(t=>{const e=this.getHoverText(n);e&&this.showHoverDiv(t.currentTarget,e)})),a.addEventListener("mouseleave",(()=>{this.hideHoverDiv()})),r<o.length-1?(a.textContent=a.textContent+"\\n",this.container.appendChild(a),this.container.appendChild(document.createElement("br"))):a.textContent.length>0&&this.container.appendChild(a)}))}))}showHoverDiv(t,e){this.hideHoverDiv(),this.hoverDiv=document.createElement("div"),e.split("\n").forEach((t=>{const e=document.createElement("div");e.textContent=t,this.hoverDiv.appendChild(e)})),this.hoverDiv.style.position="absolute",this.hoverDiv.style.backgroundColor="#ffffff",this.hoverDiv.style.border="1px solid #ccc",this.hoverDiv.style.borderRadius="4px",this.hoverDiv.style.padding="8px",this.hoverDiv.style.boxShadow="0px 2px 8px rgba(0, 0, 0, 0.1)",this.hoverDiv.style.whiteSpace="pre-wrap",this.hoverDiv.style.textAlign="left",this.hoverDiv.style.zIndex="10",this.hoverDiv.style.width="auto",this.hoverDiv.style.height="auto",this.hoverDiv.style.transition="all 0.3s ease";const n=t.getBoundingClientRect(),s=this.shadowRoot.host.getBoundingClientRect(),i=n.bottom-s.top+5,o=n.left-s.left;this.hoverDiv.style.top=`${i}px`,this.hoverDiv.style.left=`${o}px`,this.shadowRoot.appendChild(this.hoverDiv)}hideHoverDiv(){this.hoverDiv&&(this.hoverDiv.remove(),this.hoverDiv=null)}}class D{constructor(){this.tokenString=[],this.stringBuffer="",this.charIdx=0,this.tokStartIdx=0,this.ended=!1}reset(){this.tokenString=[],this.stringBuffer="",this.charIdx=0,this.tokStartIdx=0,this.ended=!1,this.onReset()}next(t){if(this.ended)throw Error("Cannot call next when already ended! Must reset with .reset().");if(null===t)this.charIdx>this.tokStartIdx&&this.tokenString.push({tokenType:this.matchEndCharacter(),stringContents:this.stringBuffer,characterRange:{start:this.tokStartIdx,end:this.charIdx}}),this.ended=!0;else{if(1!==t.length)throw Error("Character stream to be fed into AbstractTokenizer must have length 1!");this.stringBuffer+=t,this.charIdx++;const e=this.matchNext(t);if(null!==e){if(e.type===n.CONTINUATION)throw Error("Only singleChType can be continuation!");const t=this.charIdx-this.tokStartIdx;if(void 0===e.singleChType)this.tokenString.push({tokenType:e.type,stringContents:this.stringBuffer,characterRange:{start:this.tokStartIdx,end:this.charIdx}}),this.tokStartIdx=this.charIdx,this.stringBuffer="";else{if(void 0===e.numSplitCharacters&&(e.numSplitCharacters=1),e.numSplitCharacters<1)throw Error("numSplitCharacters should be >= 1!");if(t<e.numSplitCharacters+1)throw Error("The length of the buffer (including the newly added character) must be > numSplitCharacters! This is to allow splitting the buffer into two parts which are non-empty.");e.singleChType===n.CONTINUATION?(this.tokenString.push({tokenType:e.type,stringContents:this.stringBuffer.substring(0,this.stringBuffer.length-e.numSplitCharacters),characterRange:{start:this.tokStartIdx,end:this.charIdx-e.numSplitCharacters}}),this.tokStartIdx=this.charIdx-e.numSplitCharacters,this.stringBuffer=this.stringBuffer.substring(this.stringBuffer.length-e.numSplitCharacters,this.stringBuffer.length)):(this.tokenString.push({tokenType:e.type,stringContents:this.stringBuffer.substring(0,this.stringBuffer.length-e.numSplitCharacters),characterRange:{start:this.tokStartIdx,end:this.charIdx-e.numSplitCharacters}}),this.tokenString.push({tokenType:e.singleChType,stringContents:this.stringBuffer.substring(this.stringBuffer.length-e.numSplitCharacters,this.stringBuffer.length),characterRange:{start:this.charIdx-e.numSplitCharacters,end:this.charIdx}}),this.tokStartIdx=this.charIdx,this.stringBuffer="")}}}}getTokens(){return this.tokenString}currentBufferSingleCharacter(){return 1===this.stringBuffer.length}currentBufferLength(){return this.stringBuffer.length}}var v,P,w,U;!function(t){t.NONE="NONE",t.SINGLE_QUOTES="SINGLE_QUOTES",t.DOUBLE_QUOTES="DOUBLE_QUOTES",t.TRIPLE_SINGLE_QUOTES="TRIPLE_SINGLE_QUOTES",t.TRIPLE_DOUBLE_QUOTES="TRIPLE_DOUBLE_QUOTES"}(v||(v={}));class G extends D{constructor(){super(),this.insideStringStatus=v.NONE,this.insideSingleLineComments=!1,this.previousIsEscape=!1,this.contiguousQuotesCount=0}matchNext(t){if(this.insideSingleLineComments)return"\n"===t?(this.insideSingleLineComments=!1,{type:n.SINGLELINE_COMMENTS,singleChType:n.SPACINGS}):null;if(this.insideStringStatus===v.SINGLE_QUOTES)return this.handleSingleQuoteSituation(t);if(this.insideStringStatus===v.DOUBLE_QUOTES)return this.handleDoubleQuoteSituation(t);if(this.insideStringStatus===v.TRIPLE_SINGLE_QUOTES)return this.handleTripleSingleQuoteSituation(t);if(this.insideStringStatus===v.TRIPLE_DOUBLE_QUOTES)return this.handleTripleDoubleQuoteSituation(t);{const e=this.handleOtherSituation(t);return this.currentBufferSingleCharacter()?null!==e.tokenType?{type:e.tokenType}:null:null===e.tokenType?e.isPlainCharacter?null:{type:n.OTHERS,singleChType:n.CONTINUATION}:{type:n.OTHERS,singleChType:e.tokenType}}}matchEndCharacter(){return this.insideSingleLineComments?n.SINGLELINE_COMMENTS:this.insideStringStatus===v.SINGLE_QUOTES||this.insideStringStatus===v.DOUBLE_QUOTES?n.STRINGS:this.insideStringStatus===v.TRIPLE_DOUBLE_QUOTES||this.insideStringStatus===v.TRIPLE_SINGLE_QUOTES?n.MULTILINE_COMMENTS_OR_STRINGS:n.OTHERS}onReset(){this.insideStringStatus=v.NONE,this.insideSingleLineComments=!1,this.previousIsEscape=!1,this.contiguousQuotesCount=0}handleSingleQuoteSituation(t){if("'"!==t||this.previousIsEscape){if("\n"===t)return this.previousIsEscape=!1,this.contiguousQuotesCount=0,this.insideStringStatus=v.NONE,{type:n.STRINGS,singleChType:n.SPACINGS};if(1===this.contiguousQuotesCount)this.contiguousQuotesCount=0;else if(2===this.contiguousQuotesCount){this.contiguousQuotesCount=0,this.previousIsEscape=!1,this.insideStringStatus=v.NONE;const e=this.handleOtherSituation(t);return null===e.tokenType?{type:n.STRINGS,singleChType:n.CONTINUATION}:{type:n.STRINGS,singleChType:e.tokenType}}this.previousIsEscape="\\"===t&&!this.previousIsEscape}else if(this.previousIsEscape=!1,2==this.contiguousQuotesCount)this.insideStringStatus=v.TRIPLE_SINGLE_QUOTES,this.contiguousQuotesCount=0;else{if(1!=this.contiguousQuotesCount)return this.insideStringStatus=v.NONE,{type:n.STRINGS};this.contiguousQuotesCount=2}return null}handleDoubleQuoteSituation(t){if('"'!==t||this.previousIsEscape){if("\n"===t)return this.previousIsEscape=!1,this.contiguousQuotesCount=0,this.insideStringStatus=v.NONE,{type:n.STRINGS,singleChType:n.SPACINGS};if(1===this.contiguousQuotesCount)this.contiguousQuotesCount=0;else if(2===this.contiguousQuotesCount){this.contiguousQuotesCount=0,this.previousIsEscape=!1,this.insideStringStatus=v.NONE;const e=this.handleOtherSituation(t);return null===e.tokenType?{type:n.STRINGS,singleChType:n.CONTINUATION}:{type:n.STRINGS,singleChType:e.tokenType}}this.previousIsEscape="\\"===t&&!this.previousIsEscape}else if(this.previousIsEscape=!1,2==this.contiguousQuotesCount)this.insideStringStatus=v.TRIPLE_DOUBLE_QUOTES,this.contiguousQuotesCount=0;else{if(1!=this.contiguousQuotesCount)return this.insideStringStatus=v.NONE,{type:n.STRINGS};this.contiguousQuotesCount=2}return null}handleTripleSingleQuoteSituation(t){if("'"!==t||this.previousIsEscape)this.contiguousQuotesCount=0,this.previousIsEscape="\\"===t&&!this.previousIsEscape;else{if(this.previousIsEscape=!1,2==this.contiguousQuotesCount)return this.contiguousQuotesCount=0,this.insideStringStatus=v.NONE,{type:n.MULTILINE_COMMENTS_OR_STRINGS};this.contiguousQuotesCount++}return null}handleTripleDoubleQuoteSituation(t){if('"'!==t||this.previousIsEscape)this.contiguousQuotesCount=0,this.previousIsEscape="\\"===t&&!this.previousIsEscape;else{if(this.previousIsEscape=!1,2==this.contiguousQuotesCount)return this.contiguousQuotesCount=0,this.insideStringStatus=v.NONE,{type:n.MULTILINE_COMMENTS_OR_STRINGS};this.contiguousQuotesCount++}return null}handleOtherSituation(t){return"{"===t||"}"===t||"["===t||"]"===t||"("===t||")"===t?{tokenType:n.BRACES,isPlainCharacter:!1}:" "===t||"\t"===t||"\n"===t?{tokenType:n.SPACINGS,isPlainCharacter:!1}:":"===t?{tokenType:n.OTHERS,isPlainCharacter:!1}:","===t?{tokenType:n.COMMAS,isPlainCharacter:!1}:"#"===t?(this.insideSingleLineComments=!0,{tokenType:null,isPlainCharacter:!1}):'"'===t?(this.insideStringStatus=v.DOUBLE_QUOTES,this.contiguousQuotesCount=1,{tokenType:null,isPlainCharacter:!1}):"'"===t?(this.insideStringStatus=v.SINGLE_QUOTES,this.contiguousQuotesCount=1,{tokenType:null,isPlainCharacter:!1}):{tokenType:null,isPlainCharacter:!0}}}class H{constructor(t){this.validateExpressions(t),this.expressions=t,this.potentialMatches={};for(const e of Object.keys(t))this.potentialMatches[e]=[]}next(t){if(1!==t.length)throw new Error(`Input to next() must be a single character. Received: "${t}"`);let e=null;for(const[n,s]of Object.entries(this.expressions)){const i=this.potentialMatches[n];i.push(0);for(let o=i.length-1;o>=0;o--)if(t===s[i[o]]){if(i[o]+=1,i[o]===s.length){if(null!==e)throw Error("Should not have expected this, since no repeating suffix!");e=n,i.splice(o,1)}}else i.splice(o,1)}return e}reset(){for(const t of Object.keys(this.potentialMatches))this.potentialMatches[t]=[]}validateExpressions(t){const e=Object.values(t);if(0===e.length)throw new Error("Must have some expression to match.");if(e.some((t=>0===t.length)))throw new Error("Matching strings must be non-empty.");for(let t=0;t<e.length;t++)for(let n=0;n<e.length;n++){if(t===n)continue;const s=e[t],i=e[n];if(s.endsWith(i))throw new Error(`Ambiguous expressions: "${s}" has "${i}" as a suffix.`)}}getLength(t){return this.expressions[t].length}getMaxExpressionLength(){let t=0;for(const e in this.expressions)if(this.expressions.hasOwnProperty(e)){const n=this.expressions[e].length;n>t&&(t=n)}return t}}!function(t){t.NONE="NONE",t.SINGLE_QUOTES="SINGLE_QUOTES",t.DOUBLE_QUOTES="DOUBLE_QUOTES",t.MULTILINE_BACKTICKS="MULTILINE_BACKTICKS",t.MULTILINE_COMMENTS="MULTILINE_COMMENTS",t.EQUALS="EQUALS"}(P||(P={}));class Q extends D{constructor(){super(),this.insideStringStatus=P.NONE,this.insideSingleLineComments=!1,this.previousIsEscape=!1,this.stringMatcher=new H({COMMENT_START:"//",MULTILINE_COMMENT_START:"/*",MULTILINE_COMMENT_END:"*/"})}matchNext(t){const e=this.stringMatcher.next(t);if(null!==e&&this.stringMatcher.reset(),this.insideSingleLineComments)return"\n"===t?(this.insideSingleLineComments=!1,{type:n.SINGLELINE_COMMENTS,singleChType:n.SPACINGS}):null;if(this.insideStringStatus===P.SINGLE_QUOTES)return this.handleSingleQuoteSituation(t);if(this.insideStringStatus===P.DOUBLE_QUOTES)return this.handleDoubleQuoteSituation(t);if(this.insideStringStatus===P.MULTILINE_BACKTICKS)return this.handleMultilineBackticksSituation(t);if(this.insideStringStatus===P.MULTILINE_COMMENTS)return this.handleMultilineCommentsSituation(t,e);if(this.insideStringStatus===P.EQUALS)return this.handleEqualsSituation(t,e);{const s=this.handleOtherSituation(t,e);return 0===s.needsResetSplitChars?null:this.currentBufferLength()===s.needsResetSplitChars?null===s.tokenType?null:{type:s.tokenType}:null===s.tokenType?{type:n.OTHERS,singleChType:n.CONTINUATION}:{type:n.OTHERS,singleChType:s.tokenType}}}matchEndCharacter(){return this.insideSingleLineComments?n.SINGLELINE_COMMENTS:this.insideStringStatus===P.SINGLE_QUOTES||this.insideStringStatus===P.DOUBLE_QUOTES?n.STRINGS:this.insideStringStatus===P.MULTILINE_BACKTICKS||this.insideStringStatus===P.MULTILINE_COMMENTS?n.MULTILINE_COMMENTS_OR_STRINGS:(this.insideStringStatus,P.EQUALS,n.OTHERS)}onReset(){this.insideStringStatus=P.NONE,this.insideSingleLineComments=!1,this.previousIsEscape=!1,this.stringMatcher.reset()}handleSingleQuoteSituation(t){return"'"!==t||this.previousIsEscape?"\n"===t?(this.previousIsEscape=!1,this.insideStringStatus=P.NONE,{type:n.STRINGS,singleChType:n.SPACINGS}):(this.previousIsEscape="\\"===t&&!this.previousIsEscape,null):(this.previousIsEscape=!1,this.insideStringStatus=P.NONE,{type:n.STRINGS})}handleDoubleQuoteSituation(t){return'"'!==t||this.previousIsEscape?"\n"===t?(this.previousIsEscape=!1,this.insideStringStatus=P.NONE,{type:n.STRINGS,singleChType:n.SPACINGS}):(this.previousIsEscape="\\"===t&&!this.previousIsEscape,null):(this.previousIsEscape=!1,this.insideStringStatus=P.NONE,{type:n.STRINGS})}handleMultilineBackticksSituation(t){return"`"!==t||this.previousIsEscape?(this.previousIsEscape="\\"===t&&!this.previousIsEscape,null):(this.previousIsEscape=!1,this.insideStringStatus=P.NONE,{type:n.MULTILINE_COMMENTS_OR_STRINGS})}handleMultilineCommentsSituation(t,e){return"MULTILINE_COMMENT_END"===e?(this.insideStringStatus=P.NONE,{type:n.MULTILINE_COMMENTS_OR_STRINGS}):null}handleEqualsSituation(t,e){if(this.insideStringStatus=P.NONE,">"===t)return{type:n.OTHERS};const s=this.handleOtherSituation(t,e),i=null===s.tokenType?n.CONTINUATION:s.tokenType;return{type:n.OTHERS,singleChType:i}}handleOtherSituation(t,e){return"{"===t||"}"===t||"["===t||"]"===t||"("===t||")"===t?{tokenType:n.BRACES,needsResetSplitChars:1}:" "===t||"\t"===t||"\n"===t||";"===t?{tokenType:n.SPACINGS,needsResetSplitChars:1}:","===t?{tokenType:n.COMMAS,needsResetSplitChars:1}:":"===t||"<"===t||">"===t?{tokenType:n.OTHERS,needsResetSplitChars:1}:"="===t?(this.insideStringStatus=P.EQUALS,{tokenType:null,needsResetSplitChars:1}):"`"===t?(this.insideStringStatus=P.MULTILINE_BACKTICKS,{tokenType:null,needsResetSplitChars:1}):"'"===t?(this.insideStringStatus=P.SINGLE_QUOTES,{tokenType:null,needsResetSplitChars:1}):'"'===t?(this.insideStringStatus=P.DOUBLE_QUOTES,{tokenType:null,needsResetSplitChars:1}):"MULTILINE_COMMENT_START"===e?(this.insideStringStatus=P.MULTILINE_COMMENTS,{tokenType:null,needsResetSplitChars:2}):"COMMENT_START"===e?(this.insideSingleLineComments=!0,{tokenType:null,needsResetSplitChars:2}):{tokenType:null,needsResetSplitChars:0}}}class V extends Error{constructor(t){super(t),this.name="CodeParsingError"}}class ${constructor(t){this.openingToClosing=new Map,this.closingToOpening=new Map,this.stack=[];const e=[];for(const n of t){const{opening:t,closing:s}=n;if(1!==t.length)throw new Error(`Opening brace "${t}" must be exactly one character.`);if(1!==s.length)throw new Error(`Closing brace "${s}" must be exactly one character.`);if(e.includes(t))throw new Error(`Opening brace "${t}" repeated!`);if(e.push(t),e.includes(s))throw new Error(`Closing brace "${s}" repeated!`);this.openingToClosing.set(t,s),this.closingToOpening.set(s,t)}}next(t){if(1!==t.length)throw new Error(`Input character "${t}" must be exactly one character long.`);if(this.openingToClosing.has(t))this.stack.push(t);else{if(!this.closingToOpening.has(t))throw new Error(`Invalid brace: ${t}`);{if(0===this.stack.length)throw new Error(`Unmatched closing brace "${t}" encountered with no corresponding opening brace.`);const e=this.stack[this.stack.length-1],n=this.openingToClosing.get(e);if(t!==n)throw new Error(`Mismatched closing brace "${t}". Expected "${n}" to match opening brace "${e}".`);this.stack.pop()}}return this.stack.length}reset(){this.stack=[]}currentDepth(){return this.stack.length}}class z{constructor(t,e){this.root=t,this.sourceLines=e}getSourceText(t,e,n,s){if(t<0||n>this.sourceLines.length||t>n||t===n&&e>s)throw new Error("Invalid range specified. The start index must come before the end index, and the start index and end index must be contained inside the total range.");if(n===this.sourceLines.length&&0!==s||n<this.sourceLines.length&&s>this.sourceLines[n].length)throw new Error("Invalid range specified. The end character is not a valid character.");if(e>this.sourceLines[t].length)throw new Error("Invalid range specified. The start character is not a valid character.");const i=this.sourceLines.slice(t,Math.min(n+1,this.sourceLines.length));return n==this.sourceLines.length&&i.push(""),1===i.length?i[0].substring(e,s):(i[0]=i[0].substring(e),i[i.length-1]=i[i.length-1].substring(0,s),i.join("\n"))}getSourceTextFromRange(t){return this.getSourceText(t.start_line,t.start_character,t.end_line,t.end_character)}getRoot(){return this.root}getSmallestNodeContains(t){let e=this.root;t:for(;;){for(const n of e.listChildren())if(S(n.getRange(),t)){e=n;continue t}return e}}getNodeContainsIndex(t,e){let n=this.root;t:for(;;){if(null!==e&&e(n))return n;for(const e of n.listChildren())if(g(e.getRange(),t)){n=e;continue t}return n}}getMaxRangeAsIndices(){return a(u(this.sourceLines))}}class W{constructor(){this.sourceLines=[],this.positionMap=[],this.numChars=0,this.sourceTokens=[]}parse(t){if(0===t.length||1===t.length&&0===t[0].length)throw new V("Cannot parse empty string!");this.sourceLines=t;const e=this.preparseGetTokenizer();this.positionMap=[],t.forEach(((t,n)=>{for(let s=0;s<=t.length;s++)this.positionMap.push({line:n,character:s}),s<t.length?e.next(t.charAt(s)):e.next("\n")})),this.numChars=this.positionMap.length,this.positionMap.push({line:t.length,character:0}),e.next(null),this.sourceTokens=e.getTokens(),this.preparse(t,this.sourceTokens);const n=u(this.sourceLines),i=new O(n),o=new z(i,this.sourceLines);return this.parseNonTerminal(s.TOP_LEVEL,i,{startTok:0,endTok:this.sourceTokens.length},0),o}getTokenChRange(t){return this.sourceTokens[t].characterRange}getIndex(t){return this.positionMap[t]}getRange(t,e){const n=this.getIndex(t),s=this.getIndex(e);return{start_line:n.line,start_character:n.character,end_line:s.line,end_character:s.character}}getSubstring(t,e){if(t>e)throw Error("Invalid start end range!");let n="";for(let s=t;s<e;s++)n+=this.getCharacterFromIndex(s);return n}getCharacterFromIndex(t){return function(t,e){const{line:n,character:s}=e;if(n<0||n>=t.length)throw new Error(`Invalid line number: ${n}`);const i=t[n];if(s<0||s>i.length)throw new Error(`Invalid character position: ${s} in line ${n}`);return s===i.length?"\n":i.charAt(s)}(this.sourceLines,this.getIndex(t))}getCodeLength(){return this.numChars}parseNonTerminal(t,e,n,o){let r=n.startTok,a=n.startTok;this.resetDetectionState(n.startTok,t);const c=[],h=[],l=[],u=[];let T=[];for(;r<n.endTok;){const e=this.sourceTokens[r];T.push(e),({parsedEndTokIndex:a,tokenBuffer:T}=this.updateTokenStreamState(o,t,T,a,r,!1,c,h,l,u)),r++}if(({parsedEndTokIndex:a,tokenBuffer:T}=this.updateTokenStreamState(o,t,T,a,r,!0,c,h,l,u)),a!==n.endTok)throw new V("Invalid code syntax! Contains some non-parsed portions.");switch(t){case s.TOP_LEVEL:this.validateParsingStateTopLevel(c);break;case s.CLASSES:this.validateParsingStateClasses(c);break;case s.FUNCTIONS:this.validateParsingStateFunctions(c);break;case s.FUNCTION_BODY:this.validateParsingStateFunctionBody(c);break;case s.FUNCTION_DECLARATION:this.validateParsingStateFunctionDeclaration(c);break;default:throw Error("Invalid non terminal! Should not have happened.")}const S=[];for(let t=0;t<c.length;t++)S.push(this.resolveIntoNode(c[t],l[t],u[t]));if(t===s.FUNCTIONS){const t=this.getFirstLast(c);e.addChild(S[t.first]),this.parseNonTerminal(s.FUNCTION_DECLARATION,S[t.first],h[t.first],o+1),this.parseNonTerminal(s.FUNCTION_BODY,e,h[t.last],o+1)}else{const n=this.isCommentBeforeFunction()&&(t===s.TOP_LEVEL||t===s.CLASSES),r=!this.isCommentBeforeFunction()&&t===s.FUNCTION_BODY;let a=null,l=!0;for(let o=0;o<c.length;o++){if(c[o]===i.FILLER)continue;const h=S[o];if(c[o]!==i.STATEMENTS_FILLER){if(h instanceof m){if(t===s.FUNCTION_BODY&&e instanceof k&&(h instanceof N&&r&&h.isMultiLine&&l||e.flagHaveFunctionBody()),h instanceof N)n&&null!==a&&(e.addChild(a),a=null),n&&h.isMultiLine?a=h:r&&h.isMultiLine&&l?e.getParent().addChild(h):e.addChild(h);else if(h instanceof k)if(n&&null!==a){const t=d([a.getRange(),h.getRange()]),n=new L(t);n.addChild(a),n.addChild(h),a=null,e.addChild(n)}else{const t=new L(h.getRange());t.addChild(h),e.addChild(t)}else n&&null!==a&&(e.addChild(a),a=null),e.addChild(h);l=!1}}else l=!1,t===s.FUNCTION_BODY&&e instanceof k&&e.flagHaveFunctionBody()}null!==a&&e.addChild(a);for(let t=0;t<c.length;t++)if(!f(c[t])){const n=c[t],s=S[t],i=s instanceof m?s:e;this.parseNonTerminal(n,i,h[t],o+1)}}}updateTokenStreamState(t,e,n,i,o,r,a,c,h,l){const u=r?null:n[n.length-1];let T;switch(e){case s.TOP_LEVEL:T=this.detectTopLevelSymbol(a,u,o,t);break;case s.CLASSES:T=this.detectClassesSymbol(a,u,o,t);break;case s.FUNCTIONS:T=this.detectFunctionsSymbol(a,u,o,t);break;case s.FUNCTION_BODY:T=this.detectFunctionBodySymbol(a,u,o,t);break;case s.FUNCTION_DECLARATION:T=this.detectFunctionDeclarationSymbol(a,u,o,t);break;default:throw Error("Invalid non terminal! Should not have happened.")}if(null===T)return{parsedEndTokIndex:i,tokenBuffer:n};if(T.symbol.symbolType===s.TOP_LEVEL)throw new x("Cannot detect TOP_LEVEL since it must be the root!");if(void 0!==T.secondSymbol&&T.secondSymbol.symbolType===s.TOP_LEVEL)throw new x("Cannot detect TOP_LEVEL since it must be the root!");if(void 0!==T.secondSymbol&&n.length<2)throw new x("The token buffer must have at least length >= 2 to potentially split into two non-empty parts!");if(void 0!==T.secondSymbolLen&&T.secondSymbolLen>=n.length)throw new x("The length of the second symbol must be strictly less than the length of the token buffer to split into two non-empty parts!");if(void 0!==T.secondSymbolLen&&T.secondSymbolLen<1)throw new x("The length of the second symbol must be >= 1 to split into two non-empty parts!");if(void 0!==T.firstTwoSymbolsEndBufferLen){if(void 0===T.secondSymbol||void 0===T.secondSymbolLen)throw new x("If it were the case that the remaning buffer length after the first two symbols is specified, it must be the case that the second symbol's information be fully given.");if(T.firstTwoSymbolsEndBufferLen<1)throw new x("The length of the remaining buffer has to be >= 1 to split into three non-empty parts!");if(T.firstTwoSymbolsEndBufferLen+T.secondSymbolLen>=n.length)throw new x("The secondSymbolLen along with the firstTwoSymbolsEndBufferLen must be that the buffer splits into three non-empty parts, including the first symbol.")}if(void 0===T.secondSymbol&&void 0===T.secondSymbolLen)a.push(T.symbol.symbolType),h.push({startTok:i,endTok:i+n.length}),f(T.symbol.symbolType)||void 0!==T.symbol.parseRange||(T.symbol.parseRange=h[h.length-1]),c.push(void 0===T.symbol.parseRange?null:T.symbol.parseRange),l.push(T.symbol.nodeCreationInformation),this.assertParseRangeCorrectness(a[a.length-1],c[c.length-1],h[h.length-1]),i+=n.length,n=[];else if(void 0!==T.firstTwoSymbolsEndBufferLen){const t=0,e=0+n.length-T.firstTwoSymbolsEndBufferLen-T.secondSymbolLen,s=0+n.length-T.firstTwoSymbolsEndBufferLen,o=n.length;a.push(T.symbol.symbolType),h.push({startTok:i+t,endTok:i+e}),f(T.symbol.symbolType)||void 0!==T.symbol.parseRange||(T.symbol.parseRange=h[h.length-1]),c.push(void 0===T.symbol.parseRange?null:T.symbol.parseRange),l.push(T.symbol.nodeCreationInformation),this.assertParseRangeCorrectness(a[a.length-1],c[c.length-1],h[h.length-1]),a.push(T.secondSymbol.symbolType),h.push({startTok:i+e,endTok:i+s}),f(T.secondSymbol.symbolType)||void 0!==T.secondSymbol.parseRange||(T.secondSymbol.parseRange=h[h.length-1]),c.push(void 0===T.secondSymbol.parseRange?null:T.secondSymbol.parseRange),l.push(T.secondSymbol.nodeCreationInformation),this.assertParseRangeCorrectness(a[a.length-1],c[c.length-1],h[h.length-1]),n=n.slice(s,o),i+=s}else void 0===T.secondSymbolLen&&(T.secondSymbolLen=1),a.push(T.symbol.symbolType),h.push({startTok:i,endTok:i+n.length-T.secondSymbolLen}),f(T.symbol.symbolType)||void 0!==T.symbol.parseRange||(T.symbol.parseRange=h[h.length-1]),c.push(void 0===T.symbol.parseRange?null:T.symbol.parseRange),l.push(T.symbol.nodeCreationInformation),this.assertParseRangeCorrectness(a[a.length-1],c[c.length-1],h[h.length-1]),void 0===T.secondSymbol?(i+=n.length-T.secondSymbolLen,n=n.slice(n.length-T.secondSymbolLen,n.length)):(a.push(T.secondSymbol.symbolType),h.push({startTok:i+n.length-T.secondSymbolLen,endTok:i+n.length}),f(T.secondSymbol.symbolType)||void 0!==T.secondSymbol.parseRange||(T.secondSymbol.parseRange=h[h.length-1]),c.push(void 0===T.secondSymbol.parseRange?null:T.secondSymbol.parseRange),l.push(T.secondSymbol.nodeCreationInformation),this.assertParseRangeCorrectness(a[a.length-1],c[c.length-1],h[h.length-1]),i+=n.length,n=[]);return{parsedEndTokIndex:i,tokenBuffer:n}}assertParseRangeCorrectness(t,e,n){if(f(t)){if(null!==e)throw new x("Terminal types does not have a parseRange since it doesn't have to be resolved.")}else{if(null===e)throw new x("If detected type is not a terminal, must return parseRange non null to resolve further by recursion.");if(!(n.startTok<=e.startTok&&e.endTok<=n.endTok))throw new x("The parse range of a non terminal must be contained inside the range used for detection.")}}resolveIntoNode(t,e,n){const o=this.getRange(this.sourceTokens[e.startTok].characterRange.start,this.sourceTokens[e.endTok-1].characterRange.end);if(t===i.ARGUMENT)return this.createArgumentNode(o,n);if(t===i.ATTRIBUTES)return this.createAttributesNode(o,n);if(t===i.COMMENT_MULTILINE)return this.createCommentsNode(o,!0,n);if(t===i.COMMENT_SINGLELINE)return this.createCommentsNode(o,!1,n);if(t===i.REFERENCES)return this.createReferencesNode(o,n);if(t===i.FILLER)return null;if(t===i.STATEMENTS_FILLER)return null;if(t===s.CLASSES)return this.createClassesNode(o,n);if(t===s.FUNCTIONS)return this.createFunctionsNode(o,n);if(t===s.FUNCTION_BODY)return null;if(t===s.FUNCTION_DECLARATION)return this.createFunctionDeclarationNode(o,n);throw Error("Invalid detected type! Should not have happened.")}validateParsingStateTopLevel(t){for(const e of t)if(e!==i.COMMENT_MULTILINE&&e!==i.COMMENT_SINGLELINE&&e!==i.FILLER&&e!==i.REFERENCES&&e!==i.STATEMENTS_FILLER&&e!==s.CLASSES&&e!==s.FUNCTIONS)throw new x("Apart from the filler types, top level code can only contain comments, references (imports), classes and functions!")}validateParsingStateClasses(t){for(const e of t)if(e!==i.COMMENT_MULTILINE&&e!==i.COMMENT_SINGLELINE&&e!==i.STATEMENTS_FILLER&&e!==i.FILLER&&e!==i.ATTRIBUTES&&e!==s.FUNCTIONS)throw new x("Apart from the filler types, class code can only contain comments, attributes (member variables), and functions!")}validateParsingStateFunctions(t){if(t.length<2)throw new x("A valid function must contain a function declaration first and then function body afterwards! Therefore expected state length >= 2");const e=this.getFirstLast(t);let n=-1===e.first?i.FILLER:t[e.first],o=-1===e.last?i.FILLER:t[e.last];if(n!==s.FUNCTION_DECLARATION||o!==s.FUNCTION_BODY)throw new x("A valid function must contain a function declaration first and then function body afterwards!")}getFirstLast(t){let e=-1,n=-1;for(let n=0;n<t.length;n++){const s=t[n];if(s!==i.FILLER&&s!==i.STATEMENTS_FILLER){e=n;break}}for(let e=t.length-1;e>=0;e--){const s=t[e];if(s!==i.FILLER&&s!==i.STATEMENTS_FILLER){n=e;break}}return{first:e,last:n}}validateParsingStateFunctionBody(t){for(const e of t)if(e!==i.COMMENT_MULTILINE&&e!==i.COMMENT_SINGLELINE&&e!==i.FILLER&&e!==i.STATEMENTS_FILLER)throw new x("Apart from the filler types, function body code can only contain comments!")}validateParsingStateFunctionDeclaration(t){for(const e of t){if(e===i.STATEMENTS_FILLER)throw new x("Cannot have statements filler in function declarations! Code statements cannot be inside declarations.");if(e!==i.COMMENT_MULTILINE&&e!==i.COMMENT_SINGLELINE&&e!==i.FILLER&&e!==i.ARGUMENT)throw new x("Apart from the filler types, function body code can only contain comments!")}}}!function(t){t.SINGLE_LINE="SINGLE_LINE",t.MULTI_LINE="MULTI_LINE"}(w||(w={}));class Y extends W{getDetectedIndentation(){return this.pythonCodeIndents}constructor(){super(),this.pythonCodeIndents="",this.pythonIsTabs=!1,this.parseType=s.TOP_LEVEL,this.continuousIndentAfterNewline=!0,this.mostRecentLineTokIndex=0,this.lastLineForEndCodeBlockIndex=0,this.indentationCount=0,this.parsingBlockInitiated=!1,this.prevTokenEndsWithBackslash=!1,this.detectionType=w.SINGLE_LINE,this.detectionSymbol=i.STATEMENTS_FILLER,this.bracesMatcher=new $([{opening:"{",closing:"}"},{opening:"[",closing:"]"},{opening:"(",closing:")"}]),this.encounteredComments=!1,this.singleLineImmediatelyAfterComments=!1,this.stringStream="",this.tokenStream=[],this.prevMultiline=!1,this.stopAcceptingStringStream=!1,this.classOrFuncBodyParseStart=-1,this.globalDetectionStartIndex=-1,this.functDetectingBody=!1,this.functColonIndex=-1,this.functRightAfterDef=!1,this.functName=null,this.functRightAfterArrow=!1,this.functType=null,this.functBodyHasOthers=!1,this.functBodyHasPreviousContent=!1,this.functBodyImmediatelyHasMLComments=null,this.functDeclStrBuffer="",this.functDeclStartParseIdx=-1,this.functDeclParsing=!1,this.resetDetectionState(0,s.TOP_LEVEL)}preparse(t,e){const n=[];let s=0;for(const e of t){if(0===e.trim().length)continue;const t=e.match(/^([ \t]+)/);if(t){const e=t[1],i=e.includes(" "),o=e.includes("\t");if(i&&o)throw new V("Python code cannot have mixed spaces and tabs for indentation!");if(i){const t=e.length;n.push(t)}else o&&s++}}if(n.length>0&&s>0)throw new V("Python code cannot have mixed spaces and tabs for indentation!");if(0===n.length&&0===s&&(this.pythonIsTabs=!1,this.pythonCodeIndents=""),s>0)return this.pythonIsTabs=!0,void(this.pythonCodeIndents="\t");const i=[12,6,4,3,2];let o;for(const t of i)if(0!==t&&n.filter((e=>e%t!=0)).length/n.length<=.2){o=t;break}if(void 0===o)throw new V("Unable to detect a consistent indentation step within the allowed threshold.");this.pythonCodeIndents=" ".repeat(o),this.pythonIsTabs=!1}isCommentBeforeFunction(){return!1}preparseGetTokenizer(){return new G}createArgumentNode(t,e){return new y(t,e.argumentName,e.argumentType)}createAttributesNode(t,e){return new C(t,e.attributeName,e.attributeType)}createCommentsNode(t,e,n){return new N(t,e,n.commentContents)}createReferencesNode(t,e){return new R(t,e.referenceText,e.refRelativePath)}createClassesNode(t,e){const n=new I(t,e.classType,e.classDefinitionText);return n.overrideInnerRange(e.classInnerRange),n}createFunctionsNode(t,e){const n=new k(t,e.functionDefinitionText);return n.overrideInnerRange(e.funcInnerRange),n}createFunctionDeclarationNode(t,e){return new b(t,e.functionName,e.functionReturnType)}resetDetectionState(t,e){this.globalDetectionStartIndex=t,this.parseType=e,this.bracesMatcher.reset(),e===s.TOP_LEVEL?(this.continuousIndentAfterNewline=!0,this.mostRecentLineTokIndex=-1,this.indentationCount=0,this.prevTokenEndsWithBackslash=!1,this.parsingBlockInitiated=!1,this.lastLineForEndCodeBlockIndex=-1,this.encounteredComments=!1,this.singleLineImmediatelyAfterComments=!1,this.detectionType=w.SINGLE_LINE,this.detectionSymbol=i.STATEMENTS_FILLER):e===s.CLASSES?(this.continuousIndentAfterNewline=!1,this.mostRecentLineTokIndex=-1,this.indentationCount=0,this.prevTokenEndsWithBackslash=!1,this.parsingBlockInitiated=!1,this.lastLineForEndCodeBlockIndex=-1,this.encounteredComments=!1,this.singleLineImmediatelyAfterComments=!1,this.detectionType=w.SINGLE_LINE,this.detectionSymbol=i.STATEMENTS_FILLER):e===s.FUNCTIONS?(this.functDetectingBody=!1,this.functColonIndex=-1,this.functRightAfterDef=!1,this.functName=null,this.functRightAfterArrow=!1,this.functType=null):e===s.FUNCTION_BODY?(this.continuousIndentAfterNewline=!1,this.mostRecentLineTokIndex=-1,this.indentationCount=0,this.prevTokenEndsWithBackslash=!1,this.functBodyHasOthers=!1,this.functBodyHasPreviousContent=!1,this.functBodyImmediatelyHasMLComments=null):e===s.FUNCTION_DECLARATION&&(this.continuousIndentAfterNewline=!1,this.mostRecentLineTokIndex=-1,this.indentationCount=0,this.prevTokenEndsWithBackslash=!1,this.functDeclStrBuffer="",this.functDeclStartParseIdx=-1,this.functDeclParsing=!1)}detectTopLevelSymbol(t,e,n,s){return this.detectCodeBlocks(e,s,n)}detectClassesSymbol(t,e,n,s){return this.detectCodeBlocks(e,s,n)}detectFunctionsSymbol(t,e,i,o){if(this.functDetectingBody){if(null===e)return{symbol:{symbolType:s.FUNCTION_BODY}}}else{if(null===e)throw new V("Expected function to be separated by a colon!");if(0===this.bracesMatcher.currentDepth()&&-1!==e.stringContents.indexOf(":")){if(this.functColonIndex=i,this.functDetectingBody=!0,null===this.functName)throw new V("Invalid syntax! Missing function name between def and colon!");return null!==this.functType&&(this.functType=this.functType.trim()),{symbol:{symbolType:s.FUNCTION_DECLARATION,parseRange:{startTok:this.globalDetectionStartIndex,endTok:this.functColonIndex},nodeCreationInformation:{functionName:this.functName.trim(),functionReturnType:this.functType}}}}if(this.functRightAfterDef&&e.tokenType===n.OTHERS?(this.functRightAfterDef=!1,this.functName=e.stringContents):this.functRightAfterDef&&e.tokenType!==n.SPACINGS?this.functRightAfterDef=!1:i===this.globalDetectionStartIndex&&(this.functRightAfterDef=!0),this.functRightAfterArrow&&e.tokenType===n.OTHERS?(this.functRightAfterArrow=!1,this.functType=e.stringContents):this.functRightAfterArrow&&e.tokenType!==n.SPACINGS?this.functRightAfterArrow=!1:"->"===e.stringContents&&0===this.bracesMatcher.currentDepth()&&(this.functRightAfterArrow=!0),e.tokenType===n.BRACES)try{this.bracesMatcher.next(e.stringContents)}catch(t){if(t instanceof Error)throw new V("Error during brace matching! "+t.message);throw t}}return null}detectFunctionBodySymbol(t,e,s,o){if(null===e)return null!==this.functBodyImmediatelyHasMLComments?this.functBodyHasPreviousContent?{symbol:{symbolType:this.functBodyHasOthers?i.STATEMENTS_FILLER:i.FILLER},secondSymbol:{symbolType:i.COMMENT_MULTILINE,nodeCreationInformation:{commentContents:this.functBodyImmediatelyHasMLComments}},secondSymbolLen:1}:{symbol:{symbolType:i.COMMENT_MULTILINE,nodeCreationInformation:{commentContents:this.functBodyImmediatelyHasMLComments}}}:this.functBodyHasPreviousContent?{symbol:{symbolType:this.functBodyHasOthers?i.STATEMENTS_FILLER:i.FILLER}}:null;let r=null;return e.tokenType===n.SINGLELINE_COMMENTS?(r=this.functBodyHasPreviousContent?{symbol:{symbolType:this.functBodyHasOthers?i.STATEMENTS_FILLER:i.FILLER},secondSymbol:{symbolType:i.COMMENT_SINGLELINE,nodeCreationInformation:{commentContents:e.stringContents.substring(1,e.stringContents.length)}}}:{symbol:{symbolType:i.COMMENT_SINGLELINE,nodeCreationInformation:{commentContents:e.stringContents.substring(1,e.stringContents.length)}}},this.functBodyHasOthers=!1,this.functBodyHasPreviousContent=!1):e.tokenType===n.MULTILINE_COMMENTS_OR_STRINGS&&this.continuousIndentAfterNewline?this.functBodyImmediatelyHasMLComments=e.stringContents.substring(3,e.stringContents.length-3):null!==this.functBodyImmediatelyHasMLComments&&"\n"===e.stringContents?(r=this.functBodyHasPreviousContent?{symbol:{symbolType:this.functBodyHasOthers?i.STATEMENTS_FILLER:i.FILLER},secondSymbol:{symbolType:i.COMMENT_MULTILINE,nodeCreationInformation:{commentContents:this.functBodyImmediatelyHasMLComments}},secondSymbolLen:1,firstTwoSymbolsEndBufferLen:1}:{symbol:{symbolType:i.COMMENT_MULTILINE,nodeCreationInformation:{commentContents:this.functBodyImmediatelyHasMLComments}},secondSymbolLen:1},this.functBodyHasOthers=!1,this.functBodyHasPreviousContent=!1,this.functBodyImmediatelyHasMLComments=null):(this.functBodyHasPreviousContent=!0,this.functBodyImmediatelyHasMLComments=null,e.tokenType!==n.SPACINGS&&(this.functBodyHasOthers=!0)),this.updateCodeBlocksBracesAndSpacingsState(e,s),r}detectFunctionDeclarationSymbol(t,e,s,o){if(null===e)return{symbol:{symbolType:i.FILLER}};let r=null;if(this.functDeclParsing)if(e.tokenType!==n.COMMAS)(this.bracesMatcher.currentDepth()>1||")"!==e.stringContents)&&(this.functDeclStrBuffer+=e.stringContents);else if(this.bracesMatcher.currentDepth()>1)this.functDeclStrBuffer+=e.stringContents;else if(1===this.bracesMatcher.currentDepth()){let t=this.trimReplaceString(this.functDeclStrBuffer);if(0===t.length)this.functDeclStrBuffer="";else{let e,n=t.indexOf("=");-1!==n&&(t=t.substring(0,n).trim()),n=t.indexOf(":");let o=null;n>0&&n<t.length-1?(e=t.substring(0,n).trim(),o=t.substring(n+1,t.length).trim()):e=t,r={symbol:{symbolType:i.FILLER},secondSymbol:{symbolType:i.ARGUMENT,nodeCreationInformation:{argumentName:e,argumentType:o}},secondSymbolLen:s-this.functDeclStartParseIdx-1,firstTwoSymbolsEndBufferLen:1},this.functDeclStartParseIdx=s,this.functDeclStrBuffer=""}}if(this.updateCodeBlocksBracesAndSpacingsState(e,s),this.functDeclParsing&&0===this.bracesMatcher.currentDepth()){this.functDeclParsing=!1;let t=this.trimReplaceString(this.functDeclStrBuffer);if(0===t.length)this.functDeclStrBuffer="";else{let e,n=t.indexOf("=");-1!==n&&(t=t.substring(0,n).trim()),n=t.indexOf(":");let o=null;n>0&&n<t.length-1?(e=t.substring(0,n).trim(),o=t.substring(n+1,t.length).trim()):e=t,r={symbol:{symbolType:i.FILLER},secondSymbol:{symbolType:i.ARGUMENT,nodeCreationInformation:{argumentName:e,argumentType:o}},secondSymbolLen:s-this.functDeclStartParseIdx-1,firstTwoSymbolsEndBufferLen:1},this.functDeclStartParseIdx=s,this.functDeclStrBuffer=""}}else this.bracesMatcher.currentDepth()>0&&-1===this.functDeclStartParseIdx&&(this.functDeclStartParseIdx=s,this.functDeclParsing=!0);return r}detectCodeBlocks(t,e,s){if(null===t){if(this.parsingBlockInitiated){const t=this.concludeCodeBlock(s),e=s-this.lastLineForEndCodeBlockIndex;return t.symbolType===i.FILLER||t.symbolType===i.STATEMENTS_FILLER||0===e?{symbol:t}:{symbol:t,secondSymbol:{symbolType:i.FILLER},secondSymbolLen:e}}return-1!==this.mostRecentLineTokIndex||this.indentationCount>0?{symbol:{symbolType:i.FILLER}}:null}const o=e*(this.pythonIsTabs?1:this.pythonCodeIndents.length);let r=null;if(this.parsingBlockInitiated){let e=!1;this.detectionType===w.SINGLE_LINE?("\n"!==t.stringContents||0!==this.bracesMatcher.currentDepth()||this.prevTokenEndsWithBackslash||(this.parsingBlockInitiated=!1,this.singleLineImmediatelyAfterComments||(r={symbol:this.concludeCodeBlock(-1),secondSymbolLen:1}),e=!0),this.singleLineImmediatelyAfterComments=!1):0===this.bracesMatcher.currentDepth()&&(this.continuousIndentAfterNewline&&t.tokenType!==n.SPACINGS&&this.indentationCount<=o&&t.tokenType!==n.SINGLELINE_COMMENTS?(r={symbol:this.concludeCodeBlock(-1),secondSymbol:{symbolType:i.FILLER},secondSymbolLen:s-this.lastLineForEndCodeBlockIndex,firstTwoSymbolsEndBufferLen:1},this.parsingBlockInitiated=!0,this.detectionType=w.SINGLE_LINE,this.detectionSymbol=i.STATEMENTS_FILLER,this.encounteredComments=!1,this.singleLineImmediatelyAfterComments=!1,this.updateCodeBlocksContentsParseState(t,!0,s,o),e=!0):"\n"!==t.stringContents||this.prevTokenEndsWithBackslash||this.continuousIndentAfterNewline||(this.lastLineForEndCodeBlockIndex=s)),t.tokenType===n.SINGLELINE_COMMENTS&&this.detectionSymbol===i.STATEMENTS_FILLER?(r={symbol:{symbolType:i.STATEMENTS_FILLER},secondSymbol:{symbolType:i.COMMENT_SINGLELINE,nodeCreationInformation:{commentContents:t.stringContents.substring(1,t.stringContents.length)}}},this.encounteredComments=!0,this.singleLineImmediatelyAfterComments=!0):this.encounteredComments||e||this.updateCodeBlocksContentsParseState(t,!1,s,o)}else this.continuousIndentAfterNewline&&t.tokenType!==n.SPACINGS&&(t.tokenType===n.SINGLELINE_COMMENTS?r=-1!==this.mostRecentLineTokIndex||this.indentationCount>0?{symbol:{symbolType:i.FILLER},secondSymbol:{symbolType:i.COMMENT_SINGLELINE,nodeCreationInformation:{commentContents:t.stringContents.substring(1,t.stringContents.length)}}}:{symbol:{symbolType:i.COMMENT_SINGLELINE,nodeCreationInformation:{commentContents:t.stringContents.substring(1,t.stringContents.length)}}}:(this.parsingBlockInitiated=!0,this.detectionType=w.SINGLE_LINE,this.detectionSymbol=i.STATEMENTS_FILLER,this.encounteredComments=!1,this.singleLineImmediatelyAfterComments=!1,(-1!==this.mostRecentLineTokIndex||this.indentationCount>0)&&(r={symbol:{symbolType:i.FILLER},secondSymbolLen:1}),this.updateCodeBlocksContentsParseState(t,!0,s,o)));return this.updateCodeBlocksBracesAndSpacingsState(t,s),r}updateCodeBlocksContentsParseState(t,e,o,r){if(e&&(this.tokenStream=[],this.stringStream="",this.prevMultiline=!1,this.stopAcceptingStringStream=!1,this.classOrFuncBodyParseStart=-1),this.parseType===s.TOP_LEVEL)0===this.stringStream.length?r===this.indentationCount&&("from"===t.stringContents||"import"===t.stringContents||"from\\"===t.stringContents||"import\\"===t.stringContents?this.detectionSymbol=i.REFERENCES:"def"===t.stringContents||"def\\"===t.stringContents?(this.detectionType=w.MULTI_LINE,this.detectionSymbol=s.FUNCTIONS):"class"===t.stringContents||"class\\"===t.stringContents?(this.detectionType=w.MULTI_LINE,this.detectionSymbol=s.CLASSES):t.tokenType===n.MULTILINE_COMMENTS_OR_STRINGS&&(this.detectionSymbol=i.COMMENT_MULTILINE)):(this.detectionSymbol===i.COMMENT_MULTILINE&&t.tokenType!==n.SPACINGS&&(this.detectionSymbol=i.STATEMENTS_FILLER),this.detectionSymbol===s.FUNCTIONS&&(this.stopAcceptingStringStream||0!==this.bracesMatcher.currentDepth()||-1===t.stringContents.indexOf(":")||(this.stopAcceptingStringStream=!0,this.classOrFuncBodyParseStart=o+1)),this.detectionSymbol===s.CLASSES&&(this.stopAcceptingStringStream||0!==this.bracesMatcher.currentDepth()||-1===t.stringContents.indexOf(":")||(this.stopAcceptingStringStream=!0,this.classOrFuncBodyParseStart=o+1))),t.tokenType!==n.SPACINGS&&this.tokenStream.push(t),this.stopAcceptingStringStream||(this.stringStream+=t.stringContents);else{if(this.parseType!==s.CLASSES)throw Error("Not supported!");0===this.stringStream.length?r===this.indentationCount&&("def"===t.stringContents||"def\\"===t.stringContents?(this.detectionType=w.MULTI_LINE,this.detectionSymbol=s.FUNCTIONS):t.tokenType===n.MULTILINE_COMMENTS_OR_STRINGS&&(this.detectionSymbol=i.COMMENT_MULTILINE,this.prevMultiline=!0)):(this.detectionSymbol===i.COMMENT_MULTILINE&&t.tokenType!==n.SPACINGS&&(this.detectionSymbol=i.STATEMENTS_FILLER),this.detectionSymbol===s.FUNCTIONS&&(this.stopAcceptingStringStream||0!==this.bracesMatcher.currentDepth()||-1===t.stringContents.indexOf(":")||(this.stopAcceptingStringStream=!0,this.classOrFuncBodyParseStart=o+1))),!this.prevMultiline&&this.detectionSymbol===i.STATEMENTS_FILLER&&0===this.bracesMatcher.currentDepth()&&r===this.indentationCount&&(this.stringStream.length>0&&-1!==t.stringContents.lastIndexOf(":")||t.stringContents.lastIndexOf(":")>0)&&(this.detectionSymbol=i.ATTRIBUTES),t.tokenType!==n.SPACINGS&&this.tokenStream.push(t),this.stopAcceptingStringStream||(this.stringStream+=t.stringContents)}}concludeCodeBlock(t){if(-1!==t&&(this.prevTokenEndsWithBackslash||this.continuousIndentAfterNewline||(this.lastLineForEndCodeBlockIndex=t)),this.parseType===s.TOP_LEVEL){if(this.detectionSymbol===i.STATEMENTS_FILLER)return{symbolType:i.STATEMENTS_FILLER};if(this.detectionSymbol===i.REFERENCES){const t=this.trimReplaceString(this.stringStream);let e=null;if(!(this.tokenStream.length>=4)||"from"!==this.tokenStream[0].stringContents&&"from\\"!==this.tokenStream[0].stringContents||"import"!==this.tokenStream[2].stringContents&&"import\\"!==this.tokenStream[2].stringContents){if(this.tokenStream.length>=2&&("import"===this.tokenStream[0].stringContents||"import\\"===this.tokenStream[0].stringContents)){const t=this.tokenStream[1].stringContents;t.length>0&&(e="environment://"+t.replace(/\./g,"/"))}}else{const t=this.tokenStream[1].stringContents;if(t.length>0)if("."===t.charAt(0)){const n=t.substring(1,t.length);if(0===n.length)e="local-file://";else{let t=0;for(let e=0;e<n.length&&"."===n.charAt(e);e++)t++;e="local-file://"+"../".repeat(t)+n.substring(t,n.length).replace(/\./g,"/")}}else e="environment://"+t.replace(/\./g,"/")}return{symbolType:i.REFERENCES,nodeCreationInformation:{referenceText:t,refRelativePath:e}}}if(this.detectionSymbol===i.COMMENT_MULTILINE){const t=this.trimReplaceString(this.stringStream);return{symbolType:i.COMMENT_MULTILINE,nodeCreationInformation:{commentContents:t.substring(3,t.length-3)}}}if(this.detectionSymbol===s.FUNCTIONS){if(!this.stopAcceptingStringStream)return{symbolType:i.STATEMENTS_FILLER};const t=this.trimReplaceString(this.stringStream);return{symbolType:s.FUNCTIONS,nodeCreationInformation:{functionDefinitionText:t,funcInnerRange:this.getRange(this.getTokenChRange(this.classOrFuncBodyParseStart).start,this.getTokenChRange(this.lastLineForEndCodeBlockIndex).start)}}}if(this.detectionSymbol===s.CLASSES){if(-1===this.classOrFuncBodyParseStart||this.classOrFuncBodyParseStart>=this.lastLineForEndCodeBlockIndex)return{symbolType:i.STATEMENTS_FILLER};const t=this.trimReplaceString(this.stringStream);return{symbolType:s.CLASSES,parseRange:{startTok:this.classOrFuncBodyParseStart,endTok:this.lastLineForEndCodeBlockIndex},nodeCreationInformation:{classType:null,classDefinitionText:t,classInnerRange:this.getRange(this.getTokenChRange(this.classOrFuncBodyParseStart).start,this.getTokenChRange(this.lastLineForEndCodeBlockIndex).start)}}}throw Error("Not supported!")}if(this.parseType===s.CLASSES){if(this.detectionSymbol===i.STATEMENTS_FILLER)return{symbolType:i.STATEMENTS_FILLER};if(this.detectionSymbol===i.ATTRIBUTES){const t=this.trimReplaceString(this.stringStream),e=t.indexOf(":");let n,s;return-1===e?(n=t,s=null):(n=t.substring(0,e).trim(),s=e===t.length-1?"":t.substring(e+1,t.length).trim()),{symbolType:i.ATTRIBUTES,nodeCreationInformation:{attributeName:n,attributeType:s}}}if(this.detectionSymbol===i.COMMENT_MULTILINE){const t=this.trimReplaceString(this.stringStream);return{symbolType:i.COMMENT_MULTILINE,nodeCreationInformation:{commentContents:t.substring(3,t.length-3)}}}if(this.detectionSymbol===s.FUNCTIONS){if(!this.stopAcceptingStringStream)return{symbolType:i.STATEMENTS_FILLER};const t=this.trimReplaceString(this.stringStream);return{symbolType:s.FUNCTIONS,nodeCreationInformation:{functionDefinitionText:t,funcInnerRange:this.getRange(this.getTokenChRange(this.classOrFuncBodyParseStart).start,this.getTokenChRange(this.lastLineForEndCodeBlockIndex).start)}}}throw Error("Not supported!")}throw Error("Not supported!")}trimReplaceString(t){return t.trim().replace(/\\\n/g,"")}updateCodeBlocksBracesAndSpacingsState(t,e){if(t.tokenType===n.SPACINGS)0===this.bracesMatcher.currentDepth()&&("\n"!==t.stringContents||this.prevTokenEndsWithBackslash?this.continuousIndentAfterNewline&&this.indentationCount++:(this.mostRecentLineTokIndex=e,this.indentationCount=0,this.continuousIndentAfterNewline=!0)),this.prevTokenEndsWithBackslash=!1;else if(t.tokenType===n.BRACES){try{this.bracesMatcher.next(t.stringContents)}catch(t){if(t instanceof Error)throw new V("Error during brace matching! "+t.message);throw t}this.continuousIndentAfterNewline=!1,this.prevTokenEndsWithBackslash=!1}else this.continuousIndentAfterNewline=!1,this.prevTokenEndsWithBackslash=!1,t.stringContents.length>0&&"\\"===t.stringContents.charAt(t.stringContents.length-1)&&(this.prevTokenEndsWithBackslash=!0)}}!function(t){t[t.NONE=0]="NONE",t[t.TOP_LEVEL_ONLY=1]="TOP_LEVEL_ONLY",t[t.FUNCTIONS_AND_CLASSES=2]="FUNCTIONS_AND_CLASSES",t[t.FUNCTIONS_AND_CLASSES_AND_ARGUMENTS=3]="FUNCTIONS_AND_CLASSES_AND_ARGUMENTS",t[t.EVERYTHING=4]="EVERYTHING"}(U||(U={}));class K extends A{constructor(t,e){super(),this.tokenizationMode=t,this.excludeInnerRangeIfPossible=e,this.prevEndIndex={character:0,line:0}}pretokenize(t){this.prevEndIndex=this.getGlobalStartIndex()}posttokenize(t){const e=T(this.prevEndIndex,this.getGlobalEndIndex());if(-1===e)t.push({stringContents:this.getCodeStringFromIndices(this.prevEndIndex,this.getGlobalEndIndex()),tokenType:M.OTHERS,range:l(this.prevEndIndex,this.getGlobalEndIndex())});else if(1===e)throw Error("Unexpected end index larger than global end!")}convertIntoTokens(t,e,n,s,i,o){switch(this.tokenizationMode){case U.NONE:return this.prevEndIndex=this.getGlobalEndIndex(),{prefixTokens:[{stringContents:s.text,tokenType:M.TOP_LEVEL,range:s.range,originalNode:t}],action:B.TERMINATE};case U.TOP_LEVEL_ONLY:return this.convertTopLevel(t,e,n,s,i,o);case U.FUNCTIONS_AND_CLASSES:return this.convertFunctionsAndClasses(t,e,n,s,i,o);case U.FUNCTIONS_AND_CLASSES_AND_ARGUMENTS:return this.convertFunctionsAndClassesAndArguments(t,e,n,s,i,o);case U.EVERYTHING:return this.convertEverything(t,e,n,s,i,o)}}handleFirstSuffixTokenIfNecessary(t){if(void 0!==t.range){const e=t.range,n=T(this.prevEndIndex,c(e));if(1===n)throw Error("Invalid comparison! Expected previous end to be less than or equal to the current range.");if(-1===n){const t=l(this.prevEndIndex,c(e));return{stringContents:this.getCodeString(t),range:t,tokenType:M.OTHERS}}return null}return null}handleLastSuffixTokenWithRangeIfNecessary(t){this.prevEndIndex=h(t.range)}convertTopLevel(t,e,n,s,i,o){if(0===e)return{action:B.RESOLVE};if(t instanceof R)return{prefixTokens:this.getPrefixTokens(s,M.REFERENCES,t),action:B.TERMINATE};if(t instanceof N)return t.getParent()instanceof O?{prefixTokens:this.getPrefixTokens(s,M.COMMENTS,t),action:B.TERMINATE}:{action:B.TERMINATE};if(t instanceof I)return this.excludeInnerRangeIfPossible&&null!==i?null!==o?{prefixTokens:this.getPrefixTokens(i,M.CLASS,t),suffixTokens:[{stringContents:o.text,range:o.range,tokenType:M.CLASS,originalNode:t}],action:B.TERMINATE}:{prefixTokens:this.getPrefixTokens(i,M.CLASS,t),action:B.TERMINATE}:{prefixTokens:this.getPrefixTokens(s,M.CLASS,t),action:B.TERMINATE};if(t instanceof L)return{action:B.RESOLVE};if(t instanceof k)return this.excludeInnerRangeIfPossible&&null!==i?null!==o?{prefixTokens:this.getPrefixTokens(i,M.FUNCTION,t),suffixTokens:[{stringContents:o.text,range:o.range,tokenType:M.FUNCTION,originalNode:t}],action:B.TERMINATE}:{prefixTokens:this.getPrefixTokens(i,M.FUNCTION,t),action:B.TERMINATE}:{prefixTokens:this.getPrefixTokens(s,M.FUNCTION,t),action:B.TERMINATE};throw Error("Some scenarios not explored!")}convertFunctionsAndClasses(t,e,n,s,i,o){if(0===e)return{action:B.RESOLVE};if(t instanceof R)return{prefixTokens:this.getPrefixTokens(s,M.REFERENCES,t),action:B.TERMINATE};if(t instanceof N)return!this.excludeInnerRangeIfPossible&&t.getParent()instanceof L&&0!==t.getSiblingRank()?{action:B.TERMINATE}:{prefixTokens:this.getPrefixTokens(s,M.COMMENTS,t),action:B.TERMINATE};if(t instanceof I)return null!==i?null!==o?{prefixTokens:this.getPrefixTokens(i,M.CLASS,t),suffixTokens:[{stringContents:o.text,range:o.range,tokenType:M.CLASS,originalNode:t}],action:B.RESOLVE}:{prefixTokens:this.getPrefixTokens(i,M.CLASS,t),action:B.RESOLVE}:{prefixTokens:this.getPrefixTokens(s,M.CLASS,t),action:B.RESOLVE};if(t instanceof C)return{prefixTokens:this.getPrefixTokens(s,M.ATTRIBUTE,t),action:B.TERMINATE};if(t instanceof L)return{action:B.RESOLVE};if(t instanceof k)return this.excludeInnerRangeIfPossible&&null!==i?null!==o?{prefixTokens:this.getPrefixTokens(i,M.FUNCTION,t),suffixTokens:[{stringContents:o.text,range:o.range,tokenType:M.FUNCTION,originalNode:t}],action:B.TERMINATE}:{prefixTokens:this.getPrefixTokens(i,M.FUNCTION,t),action:B.TERMINATE}:{prefixTokens:this.getPrefixTokens(s,M.FUNCTION,t),action:B.TERMINATE};throw Error("Some scenarios not explored!")}convertFunctionsAndClassesAndArguments(t,e,n,s,i,o){if(0===e)return{action:B.RESOLVE};if(t instanceof R)return{prefixTokens:this.getPrefixTokens(s,M.REFERENCES,t),action:B.TERMINATE};if(t instanceof N)return t.getParent()instanceof k?{action:B.TERMINATE}:{prefixTokens:this.getPrefixTokens(s,M.COMMENTS,t),action:B.TERMINATE};if(t instanceof I)return null!==i?null!==o?{prefixTokens:this.getPrefixTokens(i,M.CLASS,t),suffixTokens:[{stringContents:o.text,range:o.range,tokenType:M.CLASS,originalNode:t}],action:B.RESOLVE}:{prefixTokens:this.getPrefixTokens(i,M.CLASS,t),action:B.RESOLVE}:{prefixTokens:this.getPrefixTokens(s,M.CLASS,t),action:B.RESOLVE};if(t instanceof C)return{prefixTokens:this.getPrefixTokens(s,M.ATTRIBUTE,t),action:B.TERMINATE};if(t instanceof L)return{action:B.RESOLVE};if(t instanceof k)return{action:B.RESOLVE};if(t instanceof b)return null!==i?null!==o?{prefixTokens:this.getPrefixTokens(i,M.FUNCTION_DEFINITION,t),suffixTokens:[{stringContents:o.text,range:o.range,tokenType:M.FUNCTION_DEFINITION,originalNode:t}],action:B.RESOLVE}:{prefixTokens:this.getPrefixTokens(i,M.FUNCTION_DEFINITION,t),action:B.RESOLVE}:{prefixTokens:this.getPrefixTokens(s,M.FUNCTION_DEFINITION,t),action:B.TERMINATE};if(t instanceof y)return{prefixTokens:this.getPrefixTokens(s,M.ARGUMENT,t),action:B.TERMINATE};throw Error("Some scenarios not explored!")}convertEverything(t,e,n,s,i,o){if(0===e)return{action:B.RESOLVE};if(t instanceof R)return{prefixTokens:this.getPrefixTokens(s,M.REFERENCES,t),action:B.TERMINATE};if(t instanceof N)return t.getParent()instanceof L&&0!==t.getSiblingRank()?{action:B.TERMINATE}:{prefixTokens:this.getPrefixTokens(s,M.COMMENTS,t),action:B.TERMINATE};if(t instanceof I)return null!==i?null!==o?{prefixTokens:this.getPrefixTokens(i,M.CLASS,t),suffixTokens:[{stringContents:o.text,range:o.range,tokenType:M.CLASS,originalNode:t}],action:B.RESOLVE}:{prefixTokens:this.getPrefixTokens(i,M.CLASS,t),action:B.RESOLVE}:{prefixTokens:this.getPrefixTokens(s,M.CLASS,t),action:B.RESOLVE};if(t instanceof C)return{prefixTokens:this.getPrefixTokens(s,M.ATTRIBUTE,t),action:B.TERMINATE};if(t instanceof L)return{action:B.RESOLVE};if(t instanceof k)return{action:B.RESOLVE};if(t instanceof b)return null!==i?null!==o?{prefixTokens:this.getPrefixTokens(i,M.FUNCTION_DEFINITION,t),suffixTokens:[{stringContents:o.text,range:o.range,tokenType:M.FUNCTION_DEFINITION,originalNode:t}],action:B.RESOLVE}:{prefixTokens:this.getPrefixTokens(i,M.FUNCTION_DEFINITION,t),action:B.RESOLVE}:{prefixTokens:this.getPrefixTokens(s,M.FUNCTION_DEFINITION,t),action:B.TERMINATE};if(t instanceof y)return{prefixTokens:this.getPrefixTokens(s,M.ARGUMENT,t),action:B.TERMINATE};throw Error("Some scenarios not explored!")}getPrefixTokens(t,e,n){const s=T(this.prevEndIndex,c(t.range));let i;if(1===s)throw Error("Invalid comparison! Expected previous end to be less than or equal to the current range.");if(-1===s){const s=l(this.prevEndIndex,c(t.range));i=[{stringContents:this.getCodeString(s),range:s,tokenType:M.OTHERS},{stringContents:t.text,range:t.range,tokenType:e,originalNode:n}]}else i=[{stringContents:t.text,range:t.range,tokenType:e,originalNode:n}];return this.prevEndIndex=h(t.range),i}disableSubtreeParsing(){return!0}includeIndentation(t,e){throw Error("Indentation not supported for faithful tokenizer!")}}class j extends A{constructor(t){super(),this.indentation=void 0===t?"    ":t}pretokenize(t){}posttokenize(t){}convertIntoTokens(t,e,n,s,i,o){if(0===e)return{action:B.RESOLVE};const r="\n"+this.indentation.repeat(e-1);if(t instanceof R)return{prefixTokens:[{stringContents:s.text,range:s.range,tokenType:M.REFERENCES,originalNode:t},{stringContents:r,tokenType:M.OTHERS}],action:B.TERMINATE};if(t instanceof N)return{prefixTokens:[{stringContents:s.text,range:s.range,tokenType:M.COMMENTS,originalNode:t},{stringContents:r,tokenType:M.OTHERS}],action:B.TERMINATE};if(t instanceof I){if(null!==i){if(0===t.listChildren().length){const e=this.needsFillTokens()?r+this.indentation+"pass"+r:r+this.indentation;return{prefixTokens:[{stringContents:i.text,range:i.range,tokenType:M.CLASS,originalNode:t},{stringContents:e,tokenType:M.OTHERS}],action:B.RESOLVE}}return{prefixTokens:[{stringContents:i.text,range:i.range,tokenType:M.CLASS,originalNode:t},{stringContents:r+this.indentation,tokenType:M.OTHERS}],suffixTokens:[{stringContents:r,tokenType:M.OTHERS}],action:B.RESOLVE}}throw Error("Unexpected null!")}if(t instanceof C)return{prefixTokens:[{stringContents:s.text,range:s.range,tokenType:M.ATTRIBUTE,originalNode:t},{stringContents:r,tokenType:M.OTHERS}],action:B.TERMINATE};if(t instanceof L){if(t.hasComment()){const e=t.listChildren();if(2!==e.length)throw Error("Expected 2 children for a function group with comments!");if(!(e[0]instanceof k))throw Error("Expected first child of function group to be a Function!");if(!(e[1]instanceof N))throw Error("Expected second child of function group to be a comment!");const n=e[0],s=e[1],i=this.getTexts(n),o=this.getTexts(s);return{prefixTokens:[{stringContents:i.tokenPrefixText.text,range:i.tokenPrefixText.range,tokenType:M.FUNCTION,originalNode:n},{stringContents:r+this.indentation,tokenType:M.OTHERS},{stringContents:o.tokenText.text,range:o.tokenText.range,tokenType:M.COMMENTS,originalNode:s},{stringContents:r,tokenType:M.OTHERS}],action:B.TERMINATE}}{const e=t.listChildren();if(1!==e.length)throw Error("Expected 1 child for a function group without comments!");if(!(e[0]instanceof k))throw Error("Expected first child of function group to be a Function!");const n=e[0],s=this.getTexts(n),i=this.needsFillTokens()?r+this.indentation+"pass"+r:r+this.indentation;return{prefixTokens:[{stringContents:s.tokenPrefixText.text,range:s.tokenPrefixText.range,tokenType:M.FUNCTION,originalNode:n},{stringContents:i,tokenType:M.OTHERS}],action:B.TERMINATE}}}throw Error("Some scenarios not explored!")}includeIndentation(t,e){t.push({stringContents:this.indentation.repeat(e-1),tokenType:M.OTHERS})}}class q extends A{constructor(t){super(),this.indentation=void 0===t?"    ":t}pretokenize(t){}posttokenize(t){}convertIntoTokens(t,e,n,s,i,o){if(0===e)return{action:B.RESOLVE};const r="\n"+this.indentation.repeat(e-1);if(t instanceof R)return{prefixTokens:[{stringContents:s.text,range:s.range,tokenType:M.REFERENCES,originalNode:t},{stringContents:";"+r,tokenType:M.OTHERS}],action:B.TERMINATE};if(t instanceof N)return{prefixTokens:[{stringContents:s.text,range:s.range,tokenType:M.COMMENTS,originalNode:t},{stringContents:r,tokenType:M.OTHERS}],action:B.TERMINATE};if(t instanceof I)return{prefixTokens:[{stringContents:i.text,range:i.range,tokenType:M.CLASS,originalNode:t},{stringContents:r+this.indentation,tokenType:M.OTHERS}],suffixTokens:[{stringContents:r,tokenType:M.OTHERS},{stringContents:o.text,range:o.range,tokenType:M.CLASS,originalNode:t},{stringContents:r,tokenType:M.OTHERS}],action:B.RESOLVE};if(t instanceof C)return{prefixTokens:[{stringContents:s.text,range:s.range,tokenType:M.ATTRIBUTE,originalNode:t},{stringContents:";"+r,tokenType:M.OTHERS}],action:B.TERMINATE};if(t instanceof L){if(t.hasComment()){const e=t.listChildren();if(2!==e.length)throw Error("Expected 2 children for a function group with comments!");if(!(e[0]instanceof N))throw Error("Expected first child of function group to be a comment!");if(!(e[1]instanceof k))throw Error("Expected second child of function group to be a Function!");const n=e[0],s=e[1],i=this.getTexts(n),o=this.getTexts(s);return{prefixTokens:[{stringContents:i.tokenText.text,range:i.tokenText.range,tokenType:M.COMMENTS,originalNode:n},{stringContents:r,tokenType:M.OTHERS},{stringContents:o.tokenPrefixText.text,range:o.tokenPrefixText.range,tokenType:M.FUNCTION,originalNode:s},{stringContents:o.tokenSuffixText.text,range:o.tokenSuffixText.range,tokenType:M.FUNCTION,originalNode:s},{stringContents:r,tokenType:M.OTHERS}],action:B.TERMINATE}}{const e=t.listChildren();if(1!==e.length)throw Error("Expected 1 child for a function group without comments!");if(!(e[0]instanceof k))throw Error("Expected first child of function group to be a Function!");const n=e[0],s=this.getTexts(n);return{prefixTokens:[{stringContents:s.tokenPrefixText.text,range:s.tokenPrefixText.range,tokenType:M.FUNCTION,originalNode:n},{stringContents:s.tokenSuffixText.text,range:s.tokenSuffixText.range,tokenType:M.FUNCTION,originalNode:n},{stringContents:r,tokenType:M.OTHERS}],action:B.TERMINATE}}}throw Error("Some scenarios not explored!")}includeIndentation(t,e){t.push({stringContents:this.indentation.repeat(e-1),tokenType:M.OTHERS})}}function J(t,e,n){return new K(e,n).tokenize(t)}function X(t,e){return new j(e).tokenize(t)}function Z(t,e){return new q(e).tokenize(t)}const tt=[{opening:"(",closing:")"},{opening:"{",closing:"}"},{opening:"[",closing:"]"},{opening:"<",closing:">"}],et=[{opening:"(",closing:")"},{opening:"{",closing:"}"},{opening:"[",closing:"]"}];var nt,st;!function(t){t[t.READING_NAME=0]="READING_NAME",t[t.READING_TYPE=1]="READING_TYPE",t[t.READING_ASSIGNMENT=2]="READING_ASSIGNMENT"}(nt||(nt={}));class it{constructor(){this.typeBracesMatcher=new $(tt),this.assignmentBracesMatcher=new $(et),this.state=nt.READING_NAME,this.nameBuffer="",this.typeBuffer=null,this.assignmentBuffer=null}next(t){switch(this.state){case nt.READING_NAME:return this.handleReadingName(t);case nt.READING_TYPE:return this.handleReadingType(t);case nt.READING_ASSIGNMENT:return this.handleReadingAssignment(t);default:return this.reset(),null}}reset(){let t;return t=null===this.nameBuffer||0===this.nameBuffer.trim().length?null:{name:this.nameBuffer.trim(),type:null===this.typeBuffer?null:this.typeBuffer.trim(),assignment:null===this.assignmentBuffer?null:this.assignmentBuffer.trim()},this.state=nt.READING_NAME,this.nameBuffer=null,this.typeBuffer=null,this.assignmentBuffer=null,this.typeBracesMatcher.reset(),this.assignmentBracesMatcher.reset(),t}handleReadingName(t){if(![":","=",";",",",")"].includes(t.stringContents))return null!==this.nameBuffer?this.nameBuffer+=t.stringContents:this.nameBuffer=t.stringContents,null;switch(t.stringContents){case":":return this.state=nt.READING_TYPE,null;case"=":return this.state=nt.READING_ASSIGNMENT,null;case";":case",":case")":return this.reset();default:throw Error("Shouldn't have happened!")}}handleReadingType(t){if(["=",";",",",")"].includes(t.stringContents)&&0===this.typeBracesMatcher.currentDepth())switch(t.stringContents){case"=":return this.state=nt.READING_ASSIGNMENT,null;case";":case",":case")":return this.reset()}return null===this.typeBuffer?this.typeBuffer=t.stringContents:this.typeBuffer+=t.stringContents,(function(t){return tt.some((e=>e.opening===t.stringContents))}(t)||function(t){return tt.some((e=>e.closing===t.stringContents))}(t))&&this.typeBracesMatcher.next(t.stringContents),null}handleReadingAssignment(t){return[";",",",")"].includes(t.stringContents)&&0===this.assignmentBracesMatcher.currentDepth()?this.reset():(null===this.assignmentBuffer?this.assignmentBuffer=t.stringContents:this.assignmentBuffer+=t.stringContents,(function(t){return et.some((e=>e.opening===t.stringContents))}(t)||function(t){return et.some((e=>e.closing===t.stringContents))}(t))&&this.assignmentBracesMatcher.next(t.stringContents),null)}}!function(t){t[t.FUNCTION_KEYWORD=0]="FUNCTION_KEYWORD",t[t.CLASS_KEYWORD=1]="CLASS_KEYWORD",t[t.ANY_KEYWORD=2]="ANY_KEYWORD",t[t.OPENING_BRACKET=3]="OPENING_BRACKET",t[t.CLOSING_BRACKET=4]="CLOSING_BRACKET",t[t.OPENING_BRACE=5]="OPENING_BRACE",t[t.CLOSING_BRACE=6]="CLOSING_BRACE",t[t.COLON=7]="COLON"}(st||(st={}));class ot extends W{constructor(){super(),this.parseType=s.TOP_LEVEL,this.bracesMatcher=new $([{opening:"{",closing:"}"},{opening:"[",closing:"]"},{opening:"(",closing:")"}]),this.curlyBracesMatcher=new $([{opening:"{",closing:"}"}]),this.argumentMatcher=new it,this.globalDetectionStartIndex=-1,this.mostRecentStatementsEndTokIdx=-1,this.continuousSpacingsAfterTerminateStatements=!0,this.functOpeningBracket=-1,this.functClosingBracket=-1,this.functOpeningBrace=-1,this.functClosingBrace=-1,this.functRetTypeBracesMatcher=new $([{opening:"{",closing:"}"},{opening:"[",closing:"]"},{opening:"(",closing:")"},{opening:"<",closing:">"}]),this.functName="",this.functType=null,this.functPreviousImmediatelyColon=!1,this.functPreviousImmediatelyClosingBracket=!1,this.functBodyHasOthers=!1,this.functBodyHasPreviousContent=!1,this.functDeclStartParseIdx=-1,this.functDeclParsing=!1,this.codeBlocksHasComments=!1,this.codeBlocksSymbolToDetect=i.STATEMENTS_FILLER,this.codeBlocksLastSymbolDetectionEnd=-1,this.codeBlocksHasContents=!1,this.codeBlocksStartOfPotentialDetection=-1,this.cbSymbSpacesTextsOnly=!0,this.cbSymbAttemptedDetect=!1,this.cbSymbStringStream="",this.cbSymbTokenStream=[],this.cbSymbClassOpeningBrace=-1,this.cbSymbClassClosingBrace=-1,this.cbSymbClassDefnText=null,this.cbSymbFuncOpeningBracket=-1,this.cbSymbFuncClosingBracket=-1,this.cbSymbFuncOpeningBrace=-1,this.cbSymbFuncClosingBrace=-1,this.cbSymbFuncDefnText=null,this.cbSymbFuncPreviousImmediatelyColon=!1,this.cbSymbFuncRetTypeBracesMatcher=new $([{opening:"{",closing:"}"},{opening:"[",closing:"]"},{opening:"(",closing:")"},{opening:"<",closing:">"}]),this.resetDetectionState(0,s.TOP_LEVEL)}preparse(t,e){}isCommentBeforeFunction(){return!0}preparseGetTokenizer(){return new Q}createArgumentNode(t,e){return new y(t,e.argumentName,e.argumentType)}createAttributesNode(t,e){return new C(t,e.attributeName,e.attributeType)}createCommentsNode(t,e,n){return new N(t,e,n.commentContents)}createReferencesNode(t,e){return new R(t,e.referenceText,e.refRelativePath)}createClassesNode(t,e){const n=new I(t,e.classType,e.classDefinitionText);return n.overrideInnerRange(e.classInnerRange),n}createFunctionsNode(t,e){const n=new k(t,e.functionDefinitionText);return n.overrideInnerRange(e.funcInnerRange),n}createFunctionDeclarationNode(t,e){return new b(t,e.functionName,e.functionReturnType)}resetDetectionState(t,e){this.globalDetectionStartIndex=t,this.parseType=e,this.bracesMatcher.reset(),this.curlyBracesMatcher.reset(),this.argumentMatcher.reset(),this.mostRecentStatementsEndTokIdx=t-1,this.continuousSpacingsAfterTerminateStatements=!0,e===s.TOP_LEVEL||e===s.CLASSES?(this.codeBlocksHasComments=!1,this.codeBlocksSymbolToDetect=i.STATEMENTS_FILLER,this.codeBlocksLastSymbolDetectionEnd=t-1,this.codeBlocksHasContents=!1,this.codeBlocksStartOfPotentialDetection=-1):e===s.FUNCTIONS?(this.functOpeningBracket=-1,this.functClosingBracket=-1,this.functOpeningBrace=-1,this.functClosingBrace=-1,this.functRetTypeBracesMatcher.reset(),this.functName="",this.functType=null,this.functPreviousImmediatelyColon=!1,this.functPreviousImmediatelyClosingBracket=!1):e===s.FUNCTION_BODY?(this.functBodyHasOthers=!1,this.functBodyHasPreviousContent=!1):e===s.FUNCTION_DECLARATION&&(this.functDeclStartParseIdx=-1,this.functDeclParsing=!1)}detectTopLevelSymbol(t,e,n,s){return this.detectCodeBlocks(e,n)}detectClassesSymbol(t,e,n,s){return this.detectCodeBlocks(e,n)}detectFunctionsSymbol(t,e,o,r){if(null===e)return{symbol:{symbolType:s.FUNCTION_BODY},secondSymbol:{symbolType:i.FILLER},secondSymbolLen:1};let a=null;if(-1===this.functOpeningBracket)e.tokenType===n.OTHERS&&(this.functName=e.stringContents),"("===e.stringContents&&0===this.bracesMatcher.currentDepth()&&(this.functOpeningBracket=o);else if(-1===this.functClosingBracket)")"===e.stringContents&&1===this.bracesMatcher.currentDepth()&&(this.functClosingBracket=o,this.functPreviousImmediatelyClosingBracket=!0);else if(-1===this.functOpeningBrace){if(0!==this.functRetTypeBracesMatcher.currentDepth()||this.functPreviousImmediatelyColon||"{"!==e.stringContents?this.functPreviousImmediatelyColon&&0===this.functRetTypeBracesMatcher.currentDepth()?this.functType=e.stringContents:null!==this.functType&&(this.functType+=e.stringContents):(null!==this.functType&&(this.functType=this.stripString(this.functType)),this.functOpeningBrace=o,this.functRetTypeBracesMatcher.reset(),a={symbol:{symbolType:s.FUNCTION_DECLARATION,parseRange:{startTok:this.globalDetectionStartIndex,endTok:this.functOpeningBrace},nodeCreationInformation:{functionName:this.functName.trim(),functionReturnType:this.functType}},secondSymbolLen:1,secondSymbol:{symbolType:i.FILLER}}),e.tokenType==n.BRACES||"<"===e.stringContents||">"===e.stringContents)try{this.functRetTypeBracesMatcher.next(e.stringContents)}catch(t){if(t instanceof Error)throw new V("Error during brace matching! "+t.message);throw t}}else-1===this.functClosingBrace&&1===this.curlyBracesMatcher.currentDepth()&&"}"===e.stringContents&&(this.functClosingBrace=o);return":"===e.stringContents?this.functPreviousImmediatelyColon=!0:e.tokenType!==n.SPACINGS&&(this.functPreviousImmediatelyColon=!1),e.tokenType!==n.SPACINGS&&(this.functPreviousImmediatelyClosingBracket=!1),this.updateBracesAndTerminateStatementsState(e,o),a}detectFunctionBodySymbol(t,e,s,o){if(null===e)return this.functBodyHasPreviousContent?{symbol:{symbolType:this.functBodyHasOthers?i.STATEMENTS_FILLER:i.FILLER}}:null;let r=null;return e.tokenType===n.SINGLELINE_COMMENTS?(r=this.functBodyHasPreviousContent?{symbol:{symbolType:this.functBodyHasOthers?i.STATEMENTS_FILLER:i.FILLER},secondSymbol:{symbolType:i.COMMENT_SINGLELINE,nodeCreationInformation:{commentContents:e.stringContents.substring(2,e.stringContents.length)}}}:{symbol:{symbolType:i.COMMENT_SINGLELINE,nodeCreationInformation:{commentContents:e.stringContents.substring(2,e.stringContents.length)}}},this.functBodyHasOthers=!1,this.functBodyHasPreviousContent=!1):e.tokenType===n.MULTILINE_COMMENTS_OR_STRINGS&&e.stringContents.startsWith("/*")&&e.stringContents.endsWith("*/")?(r=this.functBodyHasPreviousContent?{symbol:{symbolType:this.functBodyHasOthers?i.STATEMENTS_FILLER:i.FILLER},secondSymbol:{symbolType:i.COMMENT_MULTILINE,nodeCreationInformation:{commentContents:e.stringContents.substring(2,e.stringContents.length-2)}}}:{symbol:{symbolType:i.COMMENT_MULTILINE,nodeCreationInformation:{commentContents:e.stringContents.substring(2,e.stringContents.length-2)}}},this.functBodyHasOthers=!1,this.functBodyHasPreviousContent=!1):(this.functBodyHasPreviousContent=!0,e.tokenType!==n.SPACINGS&&(this.functBodyHasOthers=!0)),r}detectFunctionDeclarationSymbol(t,e,n,s){if(null===e)return{symbol:{symbolType:i.FILLER}};let o=null;if(this.functDeclParsing){const t=this.argumentMatcher.next(e);null!==t&&(o={symbol:{symbolType:i.FILLER},secondSymbol:{symbolType:i.ARGUMENT,nodeCreationInformation:{argumentName:t.name,argumentType:t.type}},secondSymbolLen:n-this.functDeclStartParseIdx-1,firstTwoSymbolsEndBufferLen:1},this.functDeclStartParseIdx=n)}if(this.updateBracesAndTerminateStatementsState(e,n),this.functDeclParsing&&0===this.bracesMatcher.currentDepth()){this.functDeclParsing=!1;const t=this.argumentMatcher.reset();null!==t&&(o={symbol:{symbolType:i.FILLER},secondSymbol:{symbolType:i.ARGUMENT,nodeCreationInformation:{argumentName:t.name,argumentType:t.type}},secondSymbolLen:n-this.functDeclStartParseIdx-1,firstTwoSymbolsEndBufferLen:1},this.functDeclStartParseIdx=n)}else this.bracesMatcher.currentDepth()>0&&-1===this.functDeclStartParseIdx&&(this.functDeclStartParseIdx=n,this.functDeclParsing=!0);return o}detectCodeBlocks(t,e){if(null===t){if(this.codeBlocksSymbolToDetect===i.STATEMENTS_FILLER)return{symbol:{symbolType:this.codeBlocksHasContents?i.STATEMENTS_FILLER:i.FILLER}};const t=this.attemptConcludeCodeBlock(this.codeBlocksSymbolToDetect);return void 0===t.create?{symbol:{symbolType:i.STATEMENTS_FILLER}}:this.codeBlocksStartOfPotentialDetection-this.codeBlocksLastSymbolDetectionEnd-1>0?{symbol:{symbolType:this.codeBlocksHasContents?i.STATEMENTS_FILLER:i.FILLER},secondSymbol:t.create,secondSymbolLen:e-this.codeBlocksStartOfPotentialDetection}:{symbol:t.create}}let s=null;if(0==e-this.mostRecentStatementsEndTokIdx-1&&(this.codeBlocksSymbolToDetect!==i.STATEMENTS_FILLER&&(this.codeBlocksSymbolToDetect=i.STATEMENTS_FILLER,this.codeBlocksHasContents=!0),this.codeBlocksHasComments=!1),this.codeBlocksSymbolToDetect===i.STATEMENTS_FILLER)if(this.codeBlocksHasComments)if(t.tokenType===n.SINGLELINE_COMMENTS){const n=e-this.codeBlocksLastSymbolDetectionEnd-1,o=t.stringContents.substring(2,t.stringContents.length);s=0===n?{symbol:{symbolType:i.COMMENT_SINGLELINE,nodeCreationInformation:{commentContents:o}}}:{symbol:{symbolType:this.codeBlocksHasContents?i.STATEMENTS_FILLER:i.FILLER},secondSymbol:{symbolType:i.COMMENT_SINGLELINE,nodeCreationInformation:{commentContents:o}}},this.codeBlocksLastSymbolDetectionEnd=e,this.codeBlocksHasContents=!1}else if(t.tokenType===n.MULTILINE_COMMENTS_OR_STRINGS&&t.stringContents.startsWith("/*")&&t.stringContents.endsWith("*/")){const n=e-this.codeBlocksLastSymbolDetectionEnd-1,o=t.stringContents.substring(2,t.stringContents.length-2);this.codeBlocksHasComments=!0,this.codeBlocksLastSymbolDetectionEnd=e,s=0===n?{symbol:{symbolType:i.COMMENT_MULTILINE,nodeCreationInformation:{commentContents:o}}}:{symbol:{symbolType:this.codeBlocksHasContents?i.STATEMENTS_FILLER:i.FILLER},secondSymbol:{symbolType:i.COMMENT_MULTILINE,nodeCreationInformation:{commentContents:o}}},this.codeBlocksLastSymbolDetectionEnd=e,this.codeBlocksHasContents=!1}else t.tokenType!==n.SPACINGS&&(this.codeBlocksHasContents=!0);else if(t.tokenType===n.SINGLELINE_COMMENTS){const n=e-this.codeBlocksLastSymbolDetectionEnd-1,o=t.stringContents.substring(2,t.stringContents.length);s=0===n?{symbol:{symbolType:i.COMMENT_SINGLELINE,nodeCreationInformation:{commentContents:o}}}:{symbol:{symbolType:this.codeBlocksHasContents?i.STATEMENTS_FILLER:i.FILLER},secondSymbol:{symbolType:i.COMMENT_SINGLELINE,nodeCreationInformation:{commentContents:o}}},this.codeBlocksHasComments=!0,this.codeBlocksLastSymbolDetectionEnd=e,this.codeBlocksHasContents=!1}else if(t.tokenType===n.MULTILINE_COMMENTS_OR_STRINGS&&t.stringContents.startsWith("/*")&&t.stringContents.endsWith("*/")){const n=e-this.codeBlocksLastSymbolDetectionEnd-1,o=t.stringContents.substring(2,t.stringContents.length-2);this.codeBlocksHasComments=!0,this.codeBlocksLastSymbolDetectionEnd=e,s=0===n?{symbol:{symbolType:i.COMMENT_MULTILINE,nodeCreationInformation:{commentContents:o}}}:{symbol:{symbolType:this.codeBlocksHasContents?i.STATEMENTS_FILLER:i.FILLER},secondSymbol:{symbolType:i.COMMENT_MULTILINE,nodeCreationInformation:{commentContents:o}}},this.codeBlocksHasComments=!0,this.codeBlocksLastSymbolDetectionEnd=e,this.codeBlocksHasContents=!1}else this.continuousSpacingsAfterTerminateStatements&&t.tokenType===n.SPACINGS||(this.continuousSpacingsAfterTerminateStatements&&(this.codeBlocksStartOfPotentialDetection=e),s=this.detectSymbolsAsCodeBlocks(t,e,e-this.codeBlocksStartOfPotentialDetection));else s=this.detectSymbolsAsCodeBlocks(t,e,e-this.codeBlocksStartOfPotentialDetection);return this.updateBracesAndTerminateStatementsState(t,e),s}detectSymbolsAsCodeBlocks(t,e,o){0===o&&(this.cbSymbSpacesTextsOnly=!0,this.cbSymbAttemptedDetect=!1,this.cbSymbStringStream="",this.cbSymbTokenStream=[],this.cbSymbClassOpeningBrace=-1,this.cbSymbClassClosingBrace=-1,this.cbSymbClassDefnText=null,this.cbSymbFuncOpeningBracket=-1,this.cbSymbFuncClosingBracket=-1,this.cbSymbFuncOpeningBrace=-1,this.cbSymbFuncClosingBrace=-1,this.cbSymbFuncDefnText=null,this.cbSymbFuncPreviousImmediatelyColon=!1,this.cbSymbFuncRetTypeBracesMatcher.reset()),this.cbSymbStringStream+=t.stringContents,t.tokenType!==n.SPACINGS&&this.cbSymbTokenStream.push(t);let r=null;if(this.parseType===s.TOP_LEVEL){if(this.codeBlocksSymbolToDetect===i.STATEMENTS_FILLER)this.cbSymbAttemptedDetect||(0===o&&"import"===t.stringContents||"export"===this.cbSymbTokenStream[0].stringContents&&"from"===t.stringContents?(this.codeBlocksSymbolToDetect=i.REFERENCES,this.cbSymbAttemptedDetect=!0):!this.cbSymbSpacesTextsOnly||"class"!==t.stringContents&&"interface"!==t.stringContents?this.cbSymbSpacesTextsOnly&&"function"===t.stringContents&&(this.codeBlocksSymbolToDetect=s.FUNCTIONS,this.cbSymbAttemptedDetect=!0):(this.codeBlocksSymbolToDetect=s.CLASSES,this.cbSymbAttemptedDetect=!0));else if(this.codeBlocksSymbolToDetect===i.REFERENCES)this.checkCodeEndCondition(t)&&(r=this.attemptConcludeCodeBlock(this.codeBlocksSymbolToDetect));else if(this.codeBlocksSymbolToDetect===s.CLASSES)this.checkCodeEndCondition(t)?r=this.attemptConcludeCodeBlock(this.codeBlocksSymbolToDetect):-1!==this.cbSymbClassOpeningBrace?-1!==this.cbSymbClassClosingBrace&&t.tokenType!==n.SPACINGS?(this.codeBlocksHasContents=!0,this.codeBlocksSymbolToDetect=i.STATEMENTS_FILLER):"}"===t.stringContents&&1===this.bracesMatcher.currentDepth()&&(this.cbSymbClassClosingBrace=e):"{"===t.stringContents&&0===this.bracesMatcher.currentDepth()&&(this.cbSymbClassOpeningBrace=e,this.cbSymbClassDefnText=this.stripString(this.cbSymbStringStream.substring(0,this.cbSymbStringStream.length-1)));else if(this.codeBlocksSymbolToDetect===s.FUNCTIONS)if(this.checkCodeEndCondition(t))r=this.attemptConcludeCodeBlock(this.codeBlocksSymbolToDetect);else{if(-1===this.cbSymbFuncOpeningBracket)"("===t.stringContents&&0===this.bracesMatcher.currentDepth()&&(this.cbSymbFuncOpeningBracket=e);else if(-1===this.cbSymbFuncClosingBracket)")"===t.stringContents&&1===this.bracesMatcher.currentDepth()&&(this.cbSymbFuncClosingBracket=e);else if(-1===this.cbSymbFuncOpeningBrace){if(0!==this.cbSymbFuncRetTypeBracesMatcher.currentDepth()||this.cbSymbFuncPreviousImmediatelyColon||"{"!==t.stringContents||(this.cbSymbFuncDefnText=this.stripString(this.cbSymbStringStream.substring(0,this.cbSymbStringStream.length-1)),this.cbSymbFuncOpeningBrace=e,this.cbSymbFuncRetTypeBracesMatcher.reset()),t.tokenType==n.BRACES||"<"===t.stringContents||">"===t.stringContents)try{this.cbSymbFuncRetTypeBracesMatcher.next(t.stringContents)}catch(t){if(t instanceof Error)throw new V("Error during brace matching! "+t.message);throw t}}else-1===this.cbSymbFuncClosingBrace?1===this.curlyBracesMatcher.currentDepth()&&"}"===t.stringContents&&(this.cbSymbFuncClosingBrace=e):t.tokenType!==n.SPACINGS&&(this.codeBlocksHasContents=!0,this.codeBlocksSymbolToDetect=i.STATEMENTS_FILLER);":"===t.stringContents?this.cbSymbFuncPreviousImmediatelyColon=!0:t.tokenType!==n.SPACINGS&&(this.cbSymbFuncPreviousImmediatelyColon=!1)}}else{if(this.parseType!==s.CLASSES)throw Error("Unexpected!");if(this.codeBlocksSymbolToDetect===i.STATEMENTS_FILLER)this.cbSymbAttemptedDetect||(this.cbSymbTokenStream.length>=2&&":"===t.stringContents&&0===this.bracesMatcher.currentDepth()&&this.cbSymbSpacesTextsOnly?(this.codeBlocksSymbolToDetect=i.ATTRIBUTES,this.cbSymbAttemptedDetect=!0,this.argumentMatcher.reset(),this.argumentMatcher.next(this.cbSymbTokenStream[this.cbSymbTokenStream.length-2]),this.argumentMatcher.next(this.cbSymbTokenStream[this.cbSymbTokenStream.length-1])):this.cbSymbSpacesTextsOnly&&"("===t.stringContents&&0===this.bracesMatcher.currentDepth()&&(this.codeBlocksSymbolToDetect=s.FUNCTIONS,this.cbSymbAttemptedDetect=!0,this.cbSymbFuncOpeningBracket=e));else if(this.codeBlocksSymbolToDetect===i.ATTRIBUTES)this.checkCodeEndCondition(t)?r=this.attemptConcludeCodeBlock(this.codeBlocksSymbolToDetect):this.argumentMatcher.next(t);else if(this.codeBlocksSymbolToDetect===s.FUNCTIONS)if(this.checkCodeEndCondition(t))r=this.attemptConcludeCodeBlock(this.codeBlocksSymbolToDetect);else{if(-1===this.cbSymbFuncClosingBracket)")"===t.stringContents&&1===this.bracesMatcher.currentDepth()&&(this.cbSymbFuncClosingBracket=e);else if(-1===this.cbSymbFuncOpeningBrace){if(0!==this.cbSymbFuncRetTypeBracesMatcher.currentDepth()||this.cbSymbFuncPreviousImmediatelyColon||"{"!==t.stringContents||(this.cbSymbFuncDefnText=this.stripString(this.cbSymbStringStream.substring(0,this.cbSymbStringStream.length-1)),this.cbSymbFuncOpeningBrace=e,this.cbSymbFuncRetTypeBracesMatcher.reset()),t.tokenType==n.BRACES||"<"===t.stringContents||">"===t.stringContents)try{this.cbSymbFuncRetTypeBracesMatcher.next(t.stringContents)}catch(t){if(t instanceof Error)throw new V("Error during brace matching! "+t.message);throw t}}else-1===this.cbSymbFuncClosingBrace?1===this.curlyBracesMatcher.currentDepth()&&"}"===t.stringContents&&(this.cbSymbFuncClosingBrace=e):t.tokenType!==n.SPACINGS&&(this.codeBlocksHasContents=!0,this.codeBlocksSymbolToDetect=i.STATEMENTS_FILLER);":"===t.stringContents?this.cbSymbFuncPreviousImmediatelyColon=!0:t.tokenType!==n.SPACINGS&&(this.cbSymbFuncPreviousImmediatelyColon=!1)}}let a=null;if(null!==r){if(void 0===r.create!==r.invalidate)throw Error("Unexpected!");void 0===r.create?this.codeBlocksHasContents=!0:(a=this.codeBlocksStartOfPotentialDetection-this.codeBlocksLastSymbolDetectionEnd==1?{symbol:r.create,secondSymbolLen:1}:{symbol:{symbolType:this.codeBlocksHasContents?i.STATEMENTS_FILLER:i.FILLER},secondSymbol:r.create,secondSymbolLen:e-this.codeBlocksStartOfPotentialDetection,firstTwoSymbolsEndBufferLen:1},this.codeBlocksLastSymbolDetectionEnd=e-1),this.codeBlocksSymbolToDetect=i.STATEMENTS_FILLER}return t.tokenType!==n.SPACINGS&&t.tokenType!==n.OTHERS&&(this.cbSymbSpacesTextsOnly=!1),a}attemptConcludeCodeBlock(t){if(this.parseType===s.TOP_LEVEL){if(t===i.REFERENCES){if(this.cbSymbTokenStream.length>=3&&("import"===this.cbSymbTokenStream[0].stringContents||"export"===this.cbSymbTokenStream[0].stringContents)&&"from"===this.cbSymbTokenStream[this.cbSymbTokenStream.length-2].stringContents&&this.cbSymbTokenStream[this.cbSymbTokenStream.length-1].tokenType===n.STRINGS){const t=this.stripString(this.cbSymbStringStream.substring(0,this.cbSymbStringStream.length-1));let e=this.cbSymbTokenStream[this.cbSymbTokenStream.length-1].stringContents;e=e.substring(1,e.length-1);let n=null;e.startsWith("./")?(e=e.substring(2,e.length),e.length>0&&(n="local-file://"+e)):e.startsWith("../")?(e=e.substring(3,e.length),e.length>0&&(n="local-file://../"+e)):e.length>0&&(n="environment://"+e);const s={referenceText:t,refRelativePath:n};return{create:{symbolType:i.REFERENCES,nodeCreationInformation:s},invalidate:!1}}return{invalidate:!0}}if(t===s.CLASSES){if(-1!==this.cbSymbClassOpeningBrace&&-1!==this.cbSymbClassClosingBrace&&null!==this.cbSymbClassDefnText){const t={startTok:this.cbSymbClassOpeningBrace+1,endTok:this.cbSymbClassClosingBrace},e=this.getRange(this.getTokenChRange(t.startTok).start,this.getTokenChRange(t.endTok).start),n={classDefinitionText:this.cbSymbClassDefnText,classType:null,classInnerRange:e};return{create:{symbolType:s.CLASSES,nodeCreationInformation:n,parseRange:t},invalidate:!1}}return{invalidate:!0}}if(t===s.FUNCTIONS){if(-1!==this.cbSymbFuncOpeningBracket&&-1!==this.cbSymbFuncClosingBracket&&-1!==this.cbSymbFuncOpeningBrace&&-1!==this.cbSymbFuncClosingBrace&&null!==this.cbSymbFuncDefnText&&this.cbSymbFuncClosingBrace-this.cbSymbFuncOpeningBrace>1){const t=this.getRange(this.getTokenChRange(this.cbSymbFuncOpeningBrace+1).start,this.getTokenChRange(this.cbSymbFuncClosingBrace).start),e={functionDefinitionText:this.cbSymbFuncDefnText,funcInnerRange:t};return{create:{symbolType:s.FUNCTIONS,nodeCreationInformation:e},invalidate:!1}}return{invalidate:!0}}throw Error("Unexpected!")}if(this.parseType===s.CLASSES){if(t===i.ATTRIBUTES){const t=this.argumentMatcher.reset();if(null!==t&&t.name.length>0&&null!==t.type){const e={attributeName:t.name,attributeType:t.type};return{create:{symbolType:i.ATTRIBUTES,nodeCreationInformation:e},invalidate:!1}}return{invalidate:!0}}if(t===s.FUNCTIONS){if(-1!==this.cbSymbFuncOpeningBracket&&-1!==this.cbSymbFuncClosingBracket&&-1!==this.cbSymbFuncOpeningBrace&&-1!==this.cbSymbFuncClosingBrace&&null!==this.cbSymbFuncDefnText&&this.cbSymbFuncClosingBrace-this.cbSymbFuncOpeningBrace>1){const t=this.getRange(this.getTokenChRange(this.cbSymbFuncOpeningBrace+1).start,this.getTokenChRange(this.cbSymbFuncClosingBrace).start),e={functionDefinitionText:this.cbSymbFuncDefnText,funcInnerRange:t};return{create:{symbolType:s.FUNCTIONS,nodeCreationInformation:e},invalidate:!1}}return{invalidate:!0}}throw Error("Unexpected!")}throw Error("Unexpected!")}updateBracesAndTerminateStatementsState(t,e){if(t.tokenType===n.SPACINGS)this.checkCodeEndCondition(t)&&(";"===t.stringContents&&this.bracesMatcher.currentDepth()>0&&this.bracesMatcher.reset(),this.mostRecentStatementsEndTokIdx=e,this.continuousSpacingsAfterTerminateStatements=!0);else if(t.tokenType===n.BRACES){try{this.bracesMatcher.next(t.stringContents)}catch(t){if(t instanceof Error)throw new V("Error during brace matching! "+t.message);throw t}if("{"===t.stringContents||"}"===t.stringContents)try{this.curlyBracesMatcher.next(t.stringContents)}catch(t){if(t instanceof Error)throw new V("Error during curly brace matching! "+t.message);throw t}this.continuousSpacingsAfterTerminateStatements=!1}else this.continuousSpacingsAfterTerminateStatements=!1}checkCodeEndCondition(t){return"\n"===t.stringContents&&0===this.bracesMatcher.currentDepth()||";"===t.stringContents&&0===this.curlyBracesMatcher.currentDepth()}stripString(t){return t.replace(/\r\n|\r|\n|\t/g," ").trim()}}function rt(t){const e=new G;for(let n=0;n<t.length;n++)e.next(t.charAt(n));return e.next(null),e.getTokens()}function at(t){const e=new Q;for(let n=0;n<t.length;n++)e.next(t.charAt(n));return e.next(null),e.getTokens()}function ct(t){const e=r(t);return(new Y).parse(e)}function ht(t){const e=r(t);return(new ot).parse(e)}return customElements.define("token-visualizer",p),customElements.define("tree-token-visualizer",_),e})()));
//# sourceMappingURL=bundle.js.map